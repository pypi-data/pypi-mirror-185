"use strict";(self.webpackChunkray_dashboard_client=self.webpackChunkray_dashboard_client||[]).push([[473],{7165:function(e,t,n){n.d(t,{M:function(){return d},u:function(){return u}});var a=n(8596),o=n(9038),r=n(4279),i=n(1859),c=n(6578),l=(n(2791),n(184)),s=(0,a.Z)((function(e){return{search:{margin:e.spacing(1),marginTop:0}}})),d=function(e){var t=e.label,n=e.onChange,a=e.defaultValue,i=s();return(0,l.jsx)(o.Z,{className:i.search,size:"small",label:t,InputProps:{onChange:function(e){var t=e.target.value;n&&n(t)},defaultValue:a,endAdornment:(0,l.jsx)(r.Z,{position:"end",children:(0,l.jsx)(c.Z,{})})}})},u=function(e){var t=e.label,n=e.onChange,a=e.options,r=s();return(0,l.jsxs)(o.Z,{className:r.search,size:"small",label:t,select:!0,SelectProps:{onChange:function(e){var t=e.target.value;n&&n(t)},style:{width:100}},children:[(0,l.jsx)(i.Z,{value:"",children:"All"}),a.map((function(e){return"string"===typeof e?(0,l.jsx)(i.Z,{value:e,children:e}):(0,l.jsx)(i.Z,{value:e[0],children:e[1]})}))]})}},4179:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var a=n(1413),o=n(885),r=n(8596),i=n(9526),c=n(9095),l=n(2067),s=n(8096),d=n(9038),u=n(4279),h=n(636),p=n(4446),m=n(6578),g=n(2791),f=n(9616),v=n(2759),b=n(7165),x=n(359),k=n(4165),y=n(5861),Z=n(476),j=function(){var e=(0,y.Z)((0,k.Z)().mark((function e(t){var n,a,o,r,i,c,l;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/"!==window.location.pathname&&"log_index"!==t&&(a=window.location.pathname.split("/")).length>1&&(o=a.findIndex((function(e){return e.includes(":")})))>-1&&((r=a.slice(0,o)).push(t.replace(/https?:\/\//,"")),t=r.join("/")),e.next=3,(0,Z.U)("log_index"===t?t:"log_proxy?url=".concat(encodeURIComponent(t)));case 3:if(i=e.sent,null===(n=i.headers["content-type"])||void 0===n||!n.includes("html")){e.next=9;break}return(c=document.createElement("div")).innerHTML=i.data,l=[].map.call(c.getElementsByTagName("li"),(function(e){var t=e.children[0],n=t.href;if(!e.innerText.startsWith("http://")&&!e.innerText.startsWith("https://")){var a="".concat(t.protocol,"//").concat(t.host);n=n.substring(a.length)}return{name:e.innerText,href:n}})),e.abrupt("return",l);case 9:return e.abrupt("return",i.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=n(184),w=(0,r.Z)((function(e){return{root:{padding:e.spacing(2),width:"100%"},table:{marginTop:e.spacing(4),padding:e.spacing(2)},pageMeta:{padding:e.spacing(2),marginTop:e.spacing(2)},search:{margin:e.spacing(1)}}})),N=function(e){var t=w(),n=function(e){var t=e.theme,n=(0,f.TH)().search,a=(0,f.UO)(),r=a.host,i=a.path;console.log("Host: "+r),console.log("Path: "+i);var c=new URLSearchParams(n),l=c.get("fileName"),s=(0,g.useRef)(null),d=(0,g.useState)(),u=(0,o.Z)(d,2),h=u[0],p=u[1],m=(0,g.useState)(),v=(0,o.Z)(m,2),b=v[0],x=v[1],k=(0,g.useState)(c.get("fileName")||""),y=(0,o.Z)(k,2),Z=y[0],C=y[1],w=(0,g.useState)(),N=(0,o.Z)(w,2),I=N[0],S=N[1],R=(0,g.useState)(),$=(0,o.Z)(R,2),T=$[0],z=$[1],E=(0,g.useState)(),F=(0,o.Z)(E,2),P=F[0],B=F[1];return(0,g.useEffect)((function(){C(l||"")}),[l]),(0,g.useEffect)((function(){var e="log_index";S("Loading..."),r?(e=decodeURIComponent(r),p(new URL(e).origin),i&&(e+=decodeURIComponent(i))):p(void 0),j(e).then((function(e){S(e||"(null)")})).catch((function(){S("Failed to load")}))}),[r,i]),{log:I,origin:h,host:r,path:i,el:s,search:b,setSearch:x,theme:t,fileName:Z,setFileName:C,startTime:T,setStart:z,endTime:P,setEnd:B}}(e),r=n.log,k=n.origin,y=n.path,Z=n.el,N=n.search,I=n.setSearch,S=n.theme,R=n.fileName,$=n.setFileName,T=n.startTime,z=n.setStart,E=n.endTime,F=n.setEnd,P="#/log/";if(k&&y){var B=decodeURIComponent(y).split("/");B.pop(),B.length>1&&(P+=encodeURIComponent(k),P+="/",P+=encodeURIComponent(B.join("/")))}return(0,C.jsx)("div",{className:t.root,ref:Z,children:(0,C.jsxs)(x.Z,{title:"Logs Viewer",children:[(0,C.jsxs)(i.Z,{children:[!k&&(0,C.jsx)("p",{children:"Please choose an url to see logs for that node"}),k&&(0,C.jsxs)("p",{children:["Node: ",k,decodeURIComponent(y||"")]}),k&&(0,C.jsxs)("div",{children:[(0,C.jsx)(c.Z,{variant:"contained",href:P,className:t.search,children:"Back To ../"}),"object"===typeof r&&(0,C.jsx)(b.M,{defaultValue:R,label:"File Name",onChange:function(e){$(e)}})]})]}),(0,C.jsxs)(i.Z,{children:["object"===typeof r&&(0,C.jsx)(l.Z,{children:r.filter((function(e){var t;return!R||(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.includes(R))})).map((function(e){return(0,C.jsx)(s.Z,{children:(0,C.jsx)("a",{href:"#/log/".concat(k?"".concat(encodeURIComponent(k),"/"):"").concat(encodeURIComponent(e.href)),children:e.name})},e.name)}))}),"string"===typeof r&&"Loading..."!==r&&(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(d.Z,{className:t.search,label:"Keyword",InputProps:{onChange:function(e){var t=e.target.value;I((0,a.Z)((0,a.Z)({},N),{},{keywords:t}))},type:"",endAdornment:(0,C.jsx)(u.Z,{position:"end",children:(0,C.jsx)(m.Z,{})})}}),(0,C.jsx)(d.Z,{className:t.search,label:"Line Number",InputProps:{onChange:function(e){var t=e.target.value;I((0,a.Z)((0,a.Z)({},N),{},{lineNumber:t}))},type:"",endAdornment:(0,C.jsx)(u.Z,{position:"end",children:(0,C.jsx)(m.Z,{})})}}),(0,C.jsx)(d.Z,{className:t.search,label:"Font Size",InputProps:{onChange:function(e){var t=e.target.value;I((0,a.Z)((0,a.Z)({},N),{},{fontSize:Number(t)}))},type:""}}),(0,C.jsx)(d.Z,{id:"datetime-local",label:"Start Time",type:"datetime-local",value:T,className:t.search,onChange:function(e){z(e.target.value)},InputLabelProps:{shrink:!0}}),(0,C.jsx)(d.Z,{label:"End Time",type:"datetime-local",value:E,className:t.search,onChange:function(e){F(e.target.value)},InputLabelProps:{shrink:!0}}),(0,C.jsxs)("div",{className:t.search,children:["Reverse:"," ",(0,C.jsx)(h.Z,{checked:null===N||void 0===N?void 0:N.revert,onChange:function(e,t){return I((0,a.Z)((0,a.Z)({},N),{},{revert:t}))}}),(0,C.jsx)(c.Z,{className:t.search,variant:"contained",onClick:function(){z(""),F("")},children:"Reset Time"})]})]}),(0,C.jsx)(v.Z,{height:600,theme:S,revert:null===N||void 0===N?void 0:N.revert,keywords:null===N||void 0===N?void 0:N.keywords,focusLine:Number(null===N||void 0===N?void 0:N.lineNumber)||void 0,fontSize:(null===N||void 0===N?void 0:N.fontSize)||12,content:r,language:"prolog",startTime:T,endTime:E})]}),"Loading..."===r&&(0,C.jsxs)("div",{children:[(0,C.jsx)("br",{}),(0,C.jsx)(p.Z,{})]})]})]})})}},636:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(7462),o=n(5987),r=n(2791),i=n(8182),c=n(8317),l=n(3108),s=n(1122),d=n(885),u=n(2497),h=n(1024),p=n(7025),m=r.forwardRef((function(e,t){var n=e.autoFocus,c=e.checked,l=e.checkedIcon,s=e.classes,m=e.className,g=e.defaultChecked,f=e.disabled,v=e.icon,b=e.id,x=e.inputProps,k=e.inputRef,y=e.name,Z=e.onBlur,j=e.onChange,C=e.onFocus,w=e.readOnly,N=e.required,I=e.tabIndex,S=e.type,R=e.value,$=(0,o.Z)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),T=(0,u.Z)({controlled:c,default:Boolean(g),name:"SwitchBase",state:"checked"}),z=(0,d.Z)(T,2),E=z[0],F=z[1],P=(0,h.Z)(),B=f;P&&"undefined"===typeof B&&(B=P.disabled);var U="checkbox"===S||"radio"===S;return r.createElement(p.Z,(0,a.Z)({component:"span",className:(0,i.Z)(s.root,m,E&&s.checked,B&&s.disabled),disabled:B,tabIndex:null,role:void 0,onFocus:function(e){C&&C(e),P&&P.onFocus&&P.onFocus(e)},onBlur:function(e){Z&&Z(e),P&&P.onBlur&&P.onBlur(e)},ref:t},$),r.createElement("input",(0,a.Z)({autoFocus:n,checked:c,defaultChecked:g,className:s.input,disabled:B,id:U&&b,name:y,onChange:function(e){var t=e.target.checked;F(t),j&&j(e,t)},readOnly:w,ref:k,required:N,tabIndex:I,type:S,value:R},x)),E?l:v)})),g=(0,c.Z)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(m),f=r.forwardRef((function(e,t){var n=e.classes,c=e.className,l=e.color,d=void 0===l?"secondary":l,u=e.edge,h=void 0!==u&&u,p=e.size,m=void 0===p?"medium":p,f=(0,o.Z)(e,["classes","className","color","edge","size"]),v=r.createElement("span",{className:n.thumb});return r.createElement("span",{className:(0,i.Z)(n.root,c,{start:n.edgeStart,end:n.edgeEnd}[h],"small"===m&&n["size".concat((0,s.Z)(m))])},r.createElement(g,(0,a.Z)({type:"checkbox",icon:v,checkedIcon:v,classes:{root:(0,i.Z)(n.switchBase,n["color".concat((0,s.Z)(d))]),input:n.input,checked:n.checked,disabled:n.disabled},ref:t},f)),r.createElement("span",{className:n.track}))})),v=(0,c.Z)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,l.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,l.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(f)}}]);
//# sourceMappingURL=473.820d5e2e.chunk.js.map