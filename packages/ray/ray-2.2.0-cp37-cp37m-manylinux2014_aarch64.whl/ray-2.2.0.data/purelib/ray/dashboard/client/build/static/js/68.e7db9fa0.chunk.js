"use strict";(self.webpackChunkray_dashboard_client=self.webpackChunkray_dashboard_client||[]).push([[68],{5413:function(e,s,n){var i=n(7269),l=n(5720),a=(n(2791),n(184));s.Z=function(e){var s=e.loading;return(0,a.jsx)(i.Z,{open:s,style:{zIndex:100},children:(0,a.jsx)(l.Z,{color:"primary"})})}},7068:function(e,s,n){n.r(s),n.d(s,{default:function(){return M}});var i=n(885),l=n(8596),a=n(636),r=n(8192),d=n(1370),o=n(1288),t=n(2206),c=n(7892),u=n.n(c),m=n(2791),v=n(1087),x=n(7201),h=n(5413),j=n(348),p=n(5847),g=n(359),Z=n(9329),b=n(1426),f=n(4165),N=n(5861),k=n(9616),y=n(2419),w=n(7522),C=n(6689),P=n(6641),D=n(184),R=(0,l.Z)((function(e){return{root:{padding:e.spacing(2)},paper:{padding:e.spacing(2),marginTop:e.spacing(2),marginBottom:e.spacing(2)},label:{fontWeight:"bold"},tab:{marginBottom:e.spacing(2)}}})),M=function(){var e,s=R(),n=function(){var e=(0,k.UO)(),s=(0,m.useState)("info"),n=(0,i.Z)(s,2),l=n[0],a=n[1],r=(0,m.useState)("Loading the node infos..."),d=(0,i.Z)(r,2),o=d[0],t=d[1],c=(0,m.useContext)(w.kn).namespaceMap,u=(0,m.useState)(!0),v=(0,i.Z)(u,2),x=v[0],h=v[1],j=(0,y.ZP)(["useNodeDetail",e.id],function(){var e=(0,N.Z)((0,f.Z)().mark((function e(s,n){var i,l,a,r,d;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.X)(n);case 2:if(i=e.sent,l=i.data,a=l.data,r=l.msg,d=l.result,r&&t(r),!1===d&&(t("Node Query Error Please Check Node Name"),h(!1)),null===a||void 0===a||!a.detail){e.next=9;break}return e.abrupt("return",a.detail);case 9:case"end":return e.stop()}}),e)})));return function(s,n){return e.apply(this,arguments)}}(),{refreshInterval:x?C.Q:0}),p=j.data;return{params:e,selectedTab:l,nodeDetail:p,msg:o,isRefreshing:x,onRefreshChange:function(e){h(e.target.checked)},raylet:null===p||void 0===p?void 0:p.raylet,handleChange:function(e,s){a(s)},namespaceMap:c}}(),l=n.params,c=n.selectedTab,M=n.nodeDetail,A=n.msg,L=n.isRefreshing,S=n.onRefreshChange,T=n.raylet,U=n.handleChange;return(0,D.jsxs)("div",{className:s.root,children:[(0,D.jsx)(h.Z,{loading:A.startsWith("Loading")}),(0,D.jsxs)(g.Z,{title:"NODE - ".concat(l.id),children:[(0,D.jsx)(p.b,{type:"node",status:(null===M||void 0===M||null===(e=M.raylet)||void 0===e?void 0:e.state)||"LOADING"}),(0,D.jsx)("br",{}),"Auto Refresh:",(0,D.jsx)(a.Z,{checked:L,onChange:S,name:"refresh",inputProps:{"aria-label":"secondary checkbox"}}),(0,D.jsx)("br",{}),"Request Status: ",A]}),(0,D.jsxs)(g.Z,{title:"Node Detail",children:[(0,D.jsxs)(r.Z,{value:c,onChange:U,className:s.tab,children:[(0,D.jsx)(d.Z,{value:"info",label:"Info"}),(0,D.jsx)(d.Z,{value:"raylet",label:"Raylet"}),(0,D.jsx)(d.Z,{value:"worker",label:"Worker (".concat((null===M||void 0===M?void 0:M.workers.length)||0,")")}),(0,D.jsx)(d.Z,{value:"actor",label:"Actor (".concat(Object.values((null===M||void 0===M?void 0:M.actors)||{}).length||0,")")})]}),M&&"info"===c&&(0,D.jsxs)("div",{className:s.paper,children:[(0,D.jsxs)(o.Z,{container:!0,spacing:2,children:[(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Hostname"})," ",M.hostname]}),(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"IP"})," ",M.ip]})]}),(0,D.jsxs)(o.Z,{container:!0,spacing:2,children:[(0,D.jsx)(o.Z,{item:!0,xs:!0,children:M.cpus&&(0,D.jsxs)(m.Fragment,{children:[(0,D.jsx)("div",{className:s.label,children:"CPU (Logic/Physic)"})," ",M.cpus[0],"/ ",M.cpus[1]]})}),(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Load (1/5/15min)"})," ",(null===M||void 0===M?void 0:M.loadAvg[0])&&M.loadAvg[0].map((function(e){return Number(e).toFixed(2)})).join("/")]})]}),(0,D.jsxs)(o.Z,{container:!0,spacing:2,children:[(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Load per CPU (1/5/15min)"})," ",(null===M||void 0===M?void 0:M.loadAvg[1])&&M.loadAvg[1].map((function(e){return Number(e).toFixed(2)})).join("/")]}),(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Boot Time"})," ",u()(1e3*M.bootTime).format("YYYY/MM/DD HH:mm:ss")]})]}),(0,D.jsxs)(o.Z,{container:!0,spacing:2,children:[(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Sent Tps"})," ",(0,b.r)(null===M||void 0===M?void 0:M.networkSpeed[0]),"/s"]}),(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Recieved Tps"})," ",(0,b.r)(null===M||void 0===M?void 0:M.networkSpeed[1]),"/s"]})]}),(0,D.jsxs)(o.Z,{container:!0,spacing:2,children:[(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Memory"})," ",(null===M||void 0===M?void 0:M.mem)&&(0,D.jsxs)(j.Z,{num:Number((null===M||void 0===M?void 0:M.mem[0])-(null===M||void 0===M?void 0:M.mem[1])),total:null===M||void 0===M?void 0:M.mem[0],children:[(0,b.r)((null===M||void 0===M?void 0:M.mem[0])-(null===M||void 0===M?void 0:M.mem[1])),"/",(0,b.r)(null===M||void 0===M?void 0:M.mem[0]),"(",null===M||void 0===M?void 0:M.mem[2],"%)"]})]}),(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"CPU"})," ",(0,D.jsxs)(j.Z,{num:Number(M.cpu),total:100,children:[M.cpu,"%"]})]})]}),(0,D.jsx)(o.Z,{container:!0,spacing:2,children:(null===M||void 0===M?void 0:M.disk)&&Object.entries(null===M||void 0===M?void 0:M.disk).map((function(e){var n=(0,i.Z)(e,2),l=n[0],a=n[1];return(0,D.jsxs)(o.Z,{item:!0,xs:6,children:[(0,D.jsxs)("div",{className:s.label,children:["Disk (",l,")"]})," ",a&&(0,D.jsxs)(j.Z,{num:Number(a.used),total:a.total,children:[(0,b.r)(a.used),"/",(0,b.r)(a.total),"(",a.percent,"%, ",(0,b.r)(a.free)," free)"]})]},l)}))}),(0,D.jsx)(o.Z,{container:!0,spacing:2,children:(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Logs"})," ",(0,D.jsx)(v.rU,{to:"/log/".concat(encodeURIComponent(M.logUrl)),children:"log"})]})})]}),T&&Object.keys(T).length>0&&"raylet"===c&&(0,D.jsx)(m.Fragment,{children:(0,D.jsxs)("div",{className:s.paper,children:[(0,D.jsx)(o.Z,{container:!0,spacing:2,children:(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Command"}),(0,D.jsx)("br",{}),(0,D.jsx)("div",{style:{height:200,overflow:"auto"},children:null===M||void 0===M?void 0:M.cmdline.join(" ")})]})}),(0,D.jsxs)(o.Z,{container:!0,spacing:2,children:[(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Pid"})," ",null===T||void 0===T?void 0:T.pid]}),(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Workers Num"})," ",null===T||void 0===T?void 0:T.numWorkers]}),(0,D.jsxs)(o.Z,{item:!0,xs:!0,children:[(0,D.jsx)("div",{className:s.label,children:"Node Manager Port"})," ",null===T||void 0===T?void 0:T.nodeManagerPort]})]})]})}),(null===M||void 0===M?void 0:M.workers)&&"worker"===c&&(0,D.jsx)(m.Fragment,{children:(0,D.jsx)(t.Z,{className:s.paper,children:(0,D.jsx)(Z.Z,{workers:null===M||void 0===M?void 0:M.workers,actorMap:null===M||void 0===M?void 0:M.actors})})}),(null===M||void 0===M?void 0:M.actors)&&"actor"===c&&(0,D.jsx)(m.Fragment,{children:(0,D.jsx)(t.Z,{className:s.paper,children:(0,D.jsx)(x.Z,{actors:M.actors,workers:null===M||void 0===M?void 0:M.workers})})})]})]})}}}]);
//# sourceMappingURL=68.e7db9fa0.chunk.js.map