<?xml version="1.0" encoding="utf-8"?><testsuites><testsuite name="pytest" errors="0" failures="1" skipped="0" tests="9" time="0.451" timestamp="2023-01-12T17:37:54.364672" hostname="OLI-OMEN"><testcase classname="bumpversion" name="FLAKE8" time="0.045" /><testcase classname="src.pyprocessors_afp_entities.__init__" name="FLAKE8" time="0.022" /><testcase classname="src.pyprocessors_afp_entities.afp_entities" name="FLAKE8" time="0.084" /><testcase classname="tests.__init__" name="FLAKE8" time="0.020" /><testcase classname="tests.test_afp_entities" name="FLAKE8" time="0.053" /><testcase classname="tests.test_afp_entities" name="test_model" time="0.000" /><testcase classname="tests.test_afp_entities" name="test_afp_entities_linker" time="0.016"><failure message="AssertionError: assert 3 == 8&#10; +  where 3 = len(RangeMap([(337, 349, Annotation(start=337, end=349, labelName='organization', label='Organization', text='Bayer France...1.0, properties=None, terms=None, createdBy=None, createdDate=None, modifiedBy=None, modifiedDate=None, status=None))]))">original_doc = Document(text='Apr√®s le rachat de Monsanto, Bayer promet la "transparence" sur le glyphosate\n\nUne fois que le rachat...ef': '292919'})], createdBy=None, createdDate=None, modifiedBy=None, modifiedDate=None, status=None)], categories=None)

    def test_afp_entities_linker(original_doc):
        # linker
        doc = original_doc.copy(deep=True)
        processor = AFPEntitiesProcessor()
        parameters = AFPEntitiesParameters(type=ConsolidationType.linker)
        docs = processor.process([doc], parameters)
        conso: Document = docs[0]
        assert conso.altTexts == HasLen(1)
        altText = conso.altTexts[0]
        FINGERPRINT = re.compile(r"([QE]\d+[ ]?)+")
        assert altText.dict() == IsPartialDict(
            name="fingerprint", text=IsStr(regex=FINGERPRINT)
        )
        assert len(conso.annotations) &lt; len(original_doc.annotations)
        conso_groups = group_annotations(conso, by_linking)
&gt;       assert len(conso_groups["candidate"]) == 8
E       AssertionError: assert 3 == 8
E        +  where 3 = len(RangeMap([(337, 349, Annotation(start=337, end=349, labelName='organization', label='Organization', text='Bayer France...1.0, properties=None, terms=None, createdBy=None, createdDate=None, modifiedBy=None, modifiedDate=None, status=None))]))

tests/test_afp_entities.py:67: AssertionError</failure></testcase><testcase classname="tests.test_afp_entities" name="test_afp_entities_whitelist" time="0.013" /><testcase classname="tests.test_afp_entities" name="test_afp_entities_linker_en" time="0.008" /></testsuite></testsuites>