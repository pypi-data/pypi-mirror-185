"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[353],{9429:function(e,n,t){t.d(n,{m:function(){return i}});var r=t(325),i=function(){var e=navigator.clipboard,n=r.useRef(null);return r.useEffect((function(){return e||(n.current=document.createElement("input"),n.current.style.position="fixed",n.current.style.top="-10000px",document.body.appendChild(n.current)),function(){n.current&&document.body.removeChild(n.current)}}),[e]),r.useCallback((function(t){e?e.writeText(t):n.current&&(n.current.value=t,n.current.select(),document.execCommand("copy"))}),[e])}},82576:function(e,n,t){t.d(n,{a:function(){return s}});var r=t(19065),i=t(325),c=function(e,n){var t=new Set(Array.from(e.checkedIds));switch(n.type){case"toggle-one":var i=n.payload,c=i.checked,o=i.id;return c?t.add(o):t.delete(o),{lastCheckedId:o,checkedIds:t};case"toggle-slice":var s=n.payload,a=s.checked,l=s.id,u=s.allIds,d=e.lastCheckedId,h=d?u.indexOf(d):-1,p=u.indexOf(l);if(-1===h||-1===p)return e;for(var x=[h,p].sort(),f=(0,r.Z)(x,2),m=f[0],g=f[1],j=m;j<=g;j++)a?t.add(u[j]):t.delete(u[j]);return{lastCheckedId:l,checkedIds:t};case"toggle-all":var v=n.payload,y=v.checked,C=v.allIds;return{lastCheckedId:null,checkedIds:y?new Set(C):new Set}}},o={checkedIds:new Set,lastCheckedId:null};function s(e){var n=i.useReducer(c,o),t=(0,r.Z)(n,2),s=t[0],a=t[1];return[s,{onToggleFactory:function(n){return function(t){var r=t.checked;t.shiftKey&&s.lastCheckedId?a({type:"toggle-slice",payload:{checked:r,id:n,allIds:e}}):a({type:"toggle-one",payload:{checked:r,id:n}})}},onToggleAll:function(n){a({type:"toggle-all",payload:{checked:n,allIds:e}})}}]}},4998:function(e,n,t){t.d(n,{m:function(){return g}});var r=t(19065),i=t(54268),c=t(60652),o=t(8358),s=t(32030),a=t(7838),l=t(55113),u=t(75453),d=t(24971),h=t(325),p=t(74549),x=t(39061),f=t(77171),m=t(32289),g=h.memo((function(e){var n=e.assetKeys,t=e.clickableTags,g=e.modalTitle,j=void 0===g?"Assets in Run":g,v=h.useState(!1),y=(0,r.Z)(v,2),C=y[0],b=y[1];if(!n||!n.length)return null;var k=n.length,w=k<=3?n:[],Z=k-w.length;return t?(0,m.jsxs)(m.Fragment,{children:[w.map((function(e,n){return(0,m.jsx)(p.rU,{to:(0,f.p)(e),children:(0,m.jsx)(i.V,{intent:"none",interactive:!0,icon:"asset",children:(0,x.ll)(e)})},"".concat((0,x.Je)(e),"-").concat(n))})),Z>0&&(0,m.jsx)(c.Z,{onClick:function(){return b(!0)},children:(0,m.jsxs)(i.V,{intent:"none",icon:"asset",children:[Z," assets"]})}),(0,m.jsxs)(o.Vq,{title:j,onClose:function(){return b(!1)},style:{minWidth:"400px",maxWidth:"80vw",maxHeight:"70vh"},isOpen:C,children:[C?(0,m.jsx)(s.x,{padding:{bottom:12},border:{side:"bottom",color:a.w.KeylineGray,width:1},style:{overflowY:"auto"},background:a.w.White,children:(0,m.jsxs)(l.i,{children:[(0,m.jsx)("thead",{children:(0,m.jsx)("tr",{children:(0,m.jsx)("th",{children:"Asset key"})})}),(0,m.jsx)("tbody",{children:n.map((function(e,n){return(0,m.jsx)("tr",{children:(0,m.jsx)("td",{children:(0,m.jsx)(p.rU,{to:(0,f.p)(e),children:(0,x.ll)(e)},(0,x.Je)(e))})},"".concat((0,x.Je)(e),"-").concat(n))}))})]})}):null,(0,m.jsx)(o.cN,{children:(0,m.jsx)(u.zx,{intent:"primary",autoFocus:!0,onClick:function(){return b(!1)},children:"OK"})})]})]}):(0,m.jsxs)(s.x,{flex:{direction:"row",gap:8,wrap:"wrap",alignItems:"center"},children:[(0,m.jsx)(d.JO,{color:a.w.Gray400,name:"asset",size:16}),"".concat(w.map(x.ll).join(", "),"\n      ").concat(Z>0&&w.length>0?" + ".concat(Z," more"):Z>0?"".concat(Z," assets"):"")]})}))},72441:function(e,n,t){t.d(n,{N:function(){return w}});var r=t(85358),i=t(19065),c=t(16798),o=t(95764),s=t(95550),a=t.n(s),l=t(49148),u=t(33918),d=t(6466),h=t(75453),p=t(24971),x=t(7838),f=t(12745),m=t(8358),g=t(325),j=t(60057),v=t(55752),y=t(32289),C=function(e){if("DeletePipelineRunSuccess"===(null===e||void 0===e?void 0:e.deletePipelineRun.__typename))throw new Error("Not an error!");return null===e||void 0===e?void 0:e.deletePipelineRun},b=function(e){return{step:"initial",frozenRuns:e,deletion:{completed:0,errors:{}}}},k=function(e,n){switch(n.type){case"reset":return b(n.frozenRuns);case"start":return(0,o.Z)((0,o.Z)({},e),{},{step:"deleting"});case"deletion-success":var t=e.deletion;return(0,o.Z)((0,o.Z)({},e),{},{step:"deleting",deletion:(0,o.Z)((0,o.Z)({},t),{},{completed:t.completed+1})});case"deletion-error":var r=e.deletion;return(0,o.Z)((0,o.Z)({},e),{},{step:"deleting",deletion:(0,o.Z)((0,o.Z)({},r),{},{completed:r.completed+1,errors:(0,o.Z)((0,o.Z)({},r.errors),{},(0,c.Z)({},n.id,n.error))})});case"complete":return(0,o.Z)((0,o.Z)({},e),{},{step:"completed"})}},w=function(e){var n=e.isOpen,t=e.onClose,c=e.onComplete,o=e.onTerminateInstead,s=e.selectedRuns,w=g.useRef(s),Z=g.useReducer(k,w.current,b),R=(0,i.Z)(Z,2),I=R[0],N=R[1],O=Object.keys(I.frozenRuns),S=O.length,E=O.filter((function(e){return I.frozenRuns[e]})).length;g.useEffect((function(){n&&N({type:"reset",frozenRuns:w.current})}),[n]),g.useEffect((function(){n||(w.current=s)}),[n,s]);var T=(0,l.D)(v.be),A=(0,i.Z)(T,1)[0],_=function(){var e=(0,r.Z)(a().mark((function e(){var n,t,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N({type:"start"}),n=Object.keys(I.frozenRuns),t=0;case 3:if(!(t<n.length)){e.next=13;break}return r=n[t],e.next=7,A({variables:{runId:r}});case 7:i=e.sent,"DeletePipelineRunSuccess"===(null===(o=i.data)||void 0===o?void 0:o.deletePipelineRun.__typename)?N({type:"deletion-success"}):N({type:"deletion-error",id:r,error:C(o)});case 10:t++,e.next=3;break;case 13:N({type:"complete"}),c();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P="deleting"!==I.step;return(0,y.jsxs)(m.Vq,{isOpen:n,title:"Delete runs",canEscapeKeyClose:P,canOutsideClickClose:P,onClose:t,children:[(0,y.jsx)(m.a7,{children:(0,y.jsxs)(d.Z,{direction:"column",spacing:24,children:[function(){switch(I.step){case"initial":return(0,y.jsxs)(d.Z,{direction:"column",spacing:8,children:[(0,y.jsx)("div",{children:"".concat(S," ").concat(1===S?"run":"runs"," will be deleted.")}),(0,y.jsx)("div",{children:"Deleting runs will not prevent them from continuing to execute, and may result in unexpected behavior."}),E?(0,y.jsx)("div",{children:E>1?(0,y.jsxs)(y.Fragment,{children:["".concat(E," of these runs can be terminated. "),(0,y.jsx)("strong",{children:"Please consider terminating these runs instead of deleting them."})]}):(0,y.jsxs)(y.Fragment,{children:["1 run can be terminated instead. ",(0,y.jsx)("strong",{children:"Please consider terminating this run instead of deleting it."})]})}):null,(0,y.jsx)("div",{children:"Do you wish to continue with deletion?"})]});case"deleting":case"completed":var e=S>0?I.deletion.completed/S:1;return(0,y.jsxs)(d.Z,{direction:"column",spacing:8,children:[(0,y.jsx)("div",{children:"Deleting\u2026"}),(0,y.jsx)(u.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"deleting"===I.step?(0,y.jsx)(j.c,{message:"Deletion in progress, please do not navigate away yet."}):null]});default:return null}}(),function(){if("initial"===I.step)return null;if("deleting"===I.step)return(0,y.jsx)("div",{children:"Please do not close the window or navigate away during deletion."});var e=I.deletion.errors,n=Object.keys(e).length,t=I.deletion.completed-n;return(0,y.jsxs)(d.Z,{direction:"column",spacing:8,children:[t?(0,y.jsxs)(d.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,y.jsx)(p.JO,{name:"check_circle",color:x.w.Green500}),(0,y.jsx)("div",{children:"Successfully deleted ".concat(t," ").concat(1===t?"run":"runs",".")})]}):null,n?(0,y.jsxs)(d.Z,{direction:"column",spacing:8,children:[(0,y.jsxs)(d.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,y.jsx)(p.JO,{name:"warning",color:x.w.Yellow500}),(0,y.jsx)("div",{children:"Could not delete ".concat(n," ").concat(1===n?"run":"runs",".")})]}),(0,y.jsx)("ul",{children:Object.keys(e).map((function(n){var t;return(0,y.jsx)("li",{children:(0,y.jsxs)(d.Z,{direction:"row",spacing:8,children:[(0,y.jsx)(f.fv,{children:n.slice(0,8)}),e[n]?(0,y.jsx)("div",{children:null===(t=e[n])||void 0===t?void 0:t.message}):null]})},n)}))})]}):null]})}()]})}),(0,y.jsx)(m.cN,{children:function(){switch(I.step){case"initial":return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,y.jsx)(h.zx,{intent:"danger",onClick:_,children:"Yes, delete ".concat("".concat(S," ").concat(1===S?"run":"runs"))}),E?(0,y.jsx)(h.zx,{intent:"primary",onClick:o,children:"Terminate ".concat("".concat(E," ").concat(1===E?"run":"runs")," instead")}):null]});case"deleting":return(0,y.jsx)(h.zx,{intent:"danger",disabled:!0,children:"Deleting\u2026"});case"completed":return(0,y.jsx)(h.zx,{intent:"primary",onClick:t,children:"Done"})}}()})]})}},37751:function(e,n,t){t.d(n,{K:function(){return p},M:function(){return x}});var r=t(54268),i=t(32030),c=t(762),o=(t(325),t(76341)),s=t(43913),a=t(57094),l=t(59549),u=t(32289),d=function(e){switch(e){case s.VOA.QUEUED:case s.VOA.NOT_STARTED:case s.VOA.MANAGED:case s.VOA.CANCELING:return"none";case s.VOA.SUCCESS:return"success";case s.VOA.STARTING:return"none";case s.VOA.FAILURE:case s.VOA.CANCELED:return"danger";case s.VOA.STARTED:return"primary";default:return(0,o.UT)(e)}},h=function(e){switch(e){case s.VOA.QUEUED:return"Queued";case s.VOA.SUCCESS:return"Success";case s.VOA.STARTING:return"Starting";case s.VOA.NOT_STARTED:return"Not started";case s.VOA.FAILURE:return"Failure";case s.VOA.STARTED:return"Started";case s.VOA.MANAGED:return"Managed";case s.VOA.CANCELING:return"Canceling";case s.VOA.CANCELED:return"Canceled";default:return(0,o.UT)(e)}},p=function(e){var n=e.status;return(0,u.jsx)(r.V,{intent:d(n),children:(0,u.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,u.jsx)(l.K9,{status:n,size:10}),(0,u.jsx)("div",{children:h(n)})]})})},x=function(e){var n=e.runId,t=e.status;return(0,u.jsx)(c.J,{position:"bottom-left",interactionKind:"hover",content:(0,u.jsx)(a.F,{runId:n}),hoverOpenDelay:100,usePortal:!0,children:(0,u.jsx)(p,{status:t})})}},22797:function(e,n,t){t.d(n,{A:function(){return le}});var r=t(47427),i=t(19065),c=t(922),o=t(43913),s=t(32030),a=t(89646),l=t(55113),u=t(50346),d=t(12745),h=t(24971),p=t(7838),x=t(325),f=t(74549),m=t(63579),g=t(39061),j=(t(96560),t(82576)),v=t(96294),y=t(62e3),C=t(76336),b=t(37099),k=t(39956),w=t(25582),Z=t(4998),R=t(16798),I=t(95764),N=t(85358),O=t(95550),S=t.n(O),E=t(49148),T=t(65880),A=t(762),_=t(8412),P=t(11831),z=t(75453),L=t(8358),D=t(24818),V=t(27601),F=t(52848),U=t(13065),J=t(9429),M=t(90933),q=t(72441),H=t(33918),K=t(6466),G=t(60057),B=t(55752),Q=t(32289),Y=function(e){if("LaunchRunSuccess"===(null===e||void 0===e?void 0:e.launchPipelineReexecution.__typename))throw new Error("Not an error!");return null===e||void 0===e?void 0:e.launchPipelineReexecution},W=function(e){if(!e)return"Unknown error";switch(e.__typename){case"ConflictingExecutionParamsError":return"Conflicting execution parameters";case"InvalidOutputError":return"Invalid output";case"InvalidStepError":return"Invalid step";case"NoModeProvidedError":return"No mode provided";case"PipelineNotFoundError":return"Job not found in workspace";case"PresetNotFoundError":return"Preset not found";case"PythonError":return e.message;case"RunConfigValidationInvalid":return"Run config invalid";case"RunConflict":return"Run conflict";case"UnauthorizedError":return"Re-execution not authorized";case"InvalidSubsetError":return"Invalid op subset: "+e.message;default:return"Unknown error"}},X=function(e){return{frozenRuns:e,step:"initial",reexecution:{completed:0,errors:{}}}},$=function(e,n){switch(n.type){case"reset":return X(n.frozenRuns);case"start":return(0,I.Z)((0,I.Z)({},e),{},{step:"reexecuting"});case"reexecution-success":var t=e.reexecution;return(0,I.Z)((0,I.Z)({},e),{},{step:"reexecuting",reexecution:(0,I.Z)((0,I.Z)({},t),{},{completed:t.completed+1})});case"reexecution-error":var r=e.reexecution;return(0,I.Z)((0,I.Z)({},e),{},{step:"reexecuting",reexecution:(0,I.Z)((0,I.Z)({},r),{},{completed:r.completed+1,errors:(0,I.Z)((0,I.Z)({},r.errors),{},(0,R.Z)({},n.id,n.error))})});case"complete":return(0,I.Z)((0,I.Z)({},e),{},{step:"completed"})}},ee=function(e){var n=e.isOpen,t=e.onClose,r=e.onComplete,c=e.reexecutionStrategy,s=e.selectedRuns,a=x.useRef(s),l=x.useReducer($,a.current,X),u=(0,i.Z)(l,2),f=u[0],m=u[1],g=Object.keys(f.frozenRuns).length;x.useEffect((function(){n&&m({type:"reset",frozenRuns:a.current})}),[n]),x.useEffect((function(){n||(a.current=s)}),[n,s]);var j=(0,E.D)(B.kO),v=(0,i.Z)(j,1)[0],y=function(){var e=(0,N.Z)(S().mark((function e(){var n,t,i,o,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m({type:"start"}),n=Object.keys(f.frozenRuns),t=0;case 3:if(!(t<n.length)){e.next=13;break}return i=n[t],e.next=7,v({variables:{reexecutionParams:{parentRunId:i,strategy:c}}});case 7:o=e.sent,"LaunchRunSuccess"===(null===(s=o.data)||void 0===s?void 0:s.launchPipelineReexecution.__typename)?m({type:"reexecution-success"}):m({type:"reexecution-error",id:i,error:Y(s)});case 10:t++,e.next=3;break;case 13:m({type:"complete"}),r(f.reexecution);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C="reexecuting"!==f.step;return(0,Q.jsxs)(L.Vq,{isOpen:n,title:c===o.hmq.ALL_STEPS?"Re-execute runs":"Re-execute runs from failure",canEscapeKeyClose:C,canOutsideClickClose:C,onClose:t,children:[(0,Q.jsx)(L.a7,{children:(0,Q.jsxs)(K.Z,{direction:"column",spacing:24,children:[function(){switch(f.step){case"initial":if(!g)return(0,Q.jsxs)(K.Z,{direction:"column",spacing:16,children:[(0,Q.jsx)("div",{children:"No runs selected for re-execution."}),(0,Q.jsx)("div",{children:"The runs you selected may already have finished executing."})]});return(0,Q.jsx)(K.Z,{direction:"column",spacing:16,children:(0,Q.jsx)("div",{children:c===o.hmq.ALL_STEPS?(0,Q.jsxs)("span",{children:["".concat(g," ").concat(1===g?"run":"runs"," will be re-executed "),(0,Q.jsx)("strong",{children:"with all steps"}),". Do you wish to continue?"]}):(0,Q.jsxs)("span",{children:["".concat(g," ").concat(1===g?"run":"runs"," will be re-executed "),(0,Q.jsx)("strong",{children:"from failure"}),". Do you wish to continue?"]})})});case"reexecuting":case"completed":var e=g>0?f.reexecution.completed/g:1;return(0,Q.jsxs)(K.Z,{direction:"column",spacing:8,children:[(0,Q.jsx)(H.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"reexecuting"===f.step?(0,Q.jsx)(G.c,{message:"Re-execution in progress, please do not navigate away yet."}):null]});default:return null}}(),function(){if("initial"===f.step)return null;if("reexecuting"===f.step)return(0,Q.jsx)("div",{children:"Please do not close the window or navigate away during re-execution."});var e=f.reexecution.errors,n=Object.keys(e).length,t=f.reexecution.completed-n;return(0,Q.jsxs)(K.Z,{direction:"column",spacing:8,children:[t?(0,Q.jsxs)(K.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,Q.jsx)(h.JO,{name:"check_circle",color:p.w.Green500}),(0,Q.jsx)("div",{children:"Successfully requested re-execution for ".concat(t," ").concat(1===t?"run":"runs",".")})]}):null,n?(0,Q.jsxs)(K.Z,{direction:"column",spacing:8,children:[(0,Q.jsxs)(K.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,Q.jsx)(h.JO,{name:"warning",color:p.w.Yellow500}),(0,Q.jsx)("div",{children:"Could not request re-execution for ".concat(n," ").concat(1===n?"run":"runs",":")})]}),(0,Q.jsx)("ul",{children:Object.keys(e).map((function(n){return(0,Q.jsx)("li",{children:(0,Q.jsxs)(K.Z,{direction:"row",spacing:8,alignItems:"baseline",children:[(0,Q.jsx)(d.fv,{children:n.slice(0,8)}),e[n]?(0,Q.jsx)("div",{children:W(e[n])}):null]})},n)}))})]}):null]})}()]})}),(0,Q.jsx)(L.cN,{children:function(){switch(f.step){case"initial":return g?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(z.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,Q.jsx)(z.zx,{intent:"primary",onClick:y,children:"Re-execute ".concat("".concat(g," ").concat(1===g?"run":"runs"))})]}):(0,Q.jsx)(z.zx,{intent:"none",onClick:t,children:"OK"});case"reexecuting":return(0,Q.jsx)(z.zx,{intent:"primary",disabled:!0,children:"Re-executing ".concat("".concat(g," ").concat(1===g?"run":"runs","..."))});case"completed":return(0,Q.jsx)(z.zx,{intent:"primary",onClick:t,children:"Done"})}}()})]})},ne=t(34653),te=t(38568),re=x.memo((function(e){var n,t=e.run,r=x.useContext(B.Lw).refetch,c=x.useState("none"),o=(0,i.Z)(c,2),s=o[0],a=o[1],l=x.useContext(F.I).rootServerURI,u=(0,m._5)(),d=u.canTerminatePipelineExecution,p=u.canDeletePipelineRun,f=u.canLaunchPipelineReexecution,g=(0,V.k6)(),j=(0,J.m)(),v=(0,E.D)(B.kO,{onCompleted:r}),y=(0,i.Z)(v,1)[0],b=(0,T.t)(oe,{variables:{runId:t.runId}}),Z=(0,i.Z)(b,2),O=Z[0],H=Z[1],K=H.called,G=H.loading,Y=H.data,W=function(){a("none")},X=function(){r()},$="Run"===(null===Y||void 0===Y||null===(n=Y.pipelineRunOrError)||void 0===n?void 0:n.__typename)?null===Y||void 0===Y?void 0:Y.pipelineRunOrError:null,ee=null===$||void 0===$?void 0:$.runConfigYaml,re=(0,k._)($),ie=ne.cv.has(t.status),se=!(!re||!(0,C.E8)(null===re||void 0===re?void 0:re.match,t.pipelineName)),ae=!!K&&!G;return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(A.J,{content:(0,Q.jsxs)(_.v2,{children:[(0,Q.jsx)(_.sN,{tagName:"button",text:G?"Loading configuration...":"View configuration...",disabled:!ee,icon:"open_in_new",onClick:function(){return a("config")}}),(0,Q.jsx)(_.R,{}),(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(P.u,{content:ce,position:"bottom",disabled:ae,targetTagName:"div",children:(0,Q.jsx)(M.U,{text:"Open in Launchpad...",disabled:!ae,icon:"edit",to:(0,w.$O)({id:t.id,pipelineName:t.pipelineName,repositoryName:null===re||void 0===re?void 0:re.match.repository.name,repositoryLocationName:null===re||void 0===re?void 0:re.match.repositoryLocation.name,isJob:se})})}),(0,Q.jsx)(P.u,{content:f.enabled?"Re-execute is unavailable because the pipeline is not present in the current workspace.":f.disabledReason,position:"bottom",disabled:ae&&!!re&&f.enabled,targetTagName:"div",children:(0,Q.jsx)(_.sN,{tagName:"button",text:"Re-execute",disabled:!ae||!re||!f.enabled,icon:"refresh",onClick:(0,N.Z)(S().mark((function e(){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!re||!ee){e.next=5;break}return e.next=3,y({variables:(0,B.kz)({run:(0,I.Z)((0,I.Z)({},t),{},{runConfigYaml:ee}),style:{type:"all"},repositoryLocationName:re.match.repositoryLocation.name,repositoryName:re.match.repository.name})});case 3:r=e.sent,(0,B.lF)(t.pipelineName,null===(n=r.data)||void 0===n?void 0:n.launchPipelineReexecution,g,{behavior:"open"});case 5:case"end":return e.stop()}}),e)})))})}),ie||!d.enabled?null:(0,Q.jsx)(_.sN,{tagName:"button",icon:"cancel",text:"Terminate",onClick:function(){return a("terminate")}}),(0,Q.jsx)(_.R,{})]}),(0,Q.jsx)(_.AL,{text:"Download debug file",icon:"download_for_offline",download:!0,href:"".concat(l,"/download_debug/").concat(t.runId)}),p.enabled?(0,Q.jsx)(_.sN,{tagName:"button",icon:"delete",text:"Delete",intent:"danger",onClick:function(){return a("delete")}}):null]}),position:"bottom-right",onOpening:function(){K||O()},children:(0,Q.jsx)(z.zx,{icon:(0,Q.jsx)(h.JO,{name:"expand_more"})})}),d.enabled?(0,Q.jsx)(te.A,{isOpen:"terminate"===s,onClose:W,onComplete:X,selectedRuns:(0,R.Z)({},t.id,t.canTerminate)}):null,p.enabled?(0,Q.jsx)(q.N,{isOpen:"delete"===s,onClose:W,onComplete:X,onTerminateInstead:function(){return a("terminate")},selectedRuns:(0,R.Z)({},t.id,t.canTerminate)}):null,(0,Q.jsxs)(L.Vq,{isOpen:"config"===s,title:"Config",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:W,children:[(0,Q.jsx)(D.NU,{value:ee||"",options:{lineNumbers:!0,mode:"yaml"}}),(0,Q.jsxs)(L.cN,{topBorder:!0,children:[(0,Q.jsx)(z.zx,{intent:"none",onClick:function(){j(ee||""),U.L.show({intent:"success",icon:"copy_to_clipboard_done",message:"Copied!"})},children:"Copy config"}),(0,Q.jsx)(z.zx,{intent:"primary",onClick:W,children:"OK"})]})]})]})})),ie=x.memo((function(e){var n=e.selected,t=e.clearSelection,r=x.useContext(B.Lw).refetch,c=(0,m._5)(),s=c.canTerminatePipelineExecution,a=c.canDeletePipelineRun,l=c.canLaunchPipelineReexecution,u=x.useState("none"),d=(0,i.Z)(u,2),p=d[0],f=d[1];if(!s.enabled&&!a.enabled)return null;var g=n.filter((function(e){return!ne.cv.has(null===e||void 0===e?void 0:e.status)})),j=g.map((function(e){return e.id})),v=g.reduce((function(e,n){return(0,I.Z)((0,I.Z)({},e),{},(0,R.Z)({},n.id,n.canTerminate))}),{}),y=n.map((function(e){return e.runId})),C=n.reduce((function(e,n){return(0,I.Z)((0,I.Z)({},e),{},(0,R.Z)({},n.id,n.canTerminate))}),{}),b=n.filter((function(e){return ne.hd.has(null===e||void 0===e?void 0:e.status)})),k=b.reduce((function(e,n){return(0,I.Z)((0,I.Z)({},e),{},(0,R.Z)({},n.id,n.id))}),{}),w=n.filter((function(e){return ne.cv.has(null===e||void 0===e?void 0:e.status)})),Z=w.reduce((function(e,n){return(0,I.Z)((0,I.Z)({},e),{},(0,R.Z)({},n.id,n.id))}),{}),N=function(){f("none")},O=function(){t(),r()};return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(A.J,{content:(0,Q.jsxs)(_.v2,{children:[s.enabled?(0,Q.jsx)(_.sN,{icon:"cancel",text:"Terminate ".concat(j.length," ").concat(1===j.length?"run":"runs"),disabled:0===j.length,onClick:function(){f("terminate")}}):null,a.enabled?(0,Q.jsx)(_.sN,{icon:"delete",intent:"danger",text:"Delete ".concat(y.length," ").concat(1===y.length?"run":"runs"),disabled:0===y.length,onClick:function(){f("delete")}}):null,l.enabled?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(_.sN,{icon:"refresh",text:"Re-execute ".concat(w.length," ").concat(1===w.length?"run":"runs"),disabled:0===w.length,onClick:function(){f("reexecute")}}),(0,Q.jsx)(_.sN,{icon:"refresh",text:"Re-execute ".concat(b.length," ").concat(1===b.length?"run":"runs"," from failure"),disabled:0===b.length,onClick:function(){f("reexecute-from-failure")}})]}):null]}),position:"bottom-right",children:(0,Q.jsx)(z.zx,{disabled:0===n.length,rightIcon:(0,Q.jsx)(h.JO,{name:"expand_more"}),children:"Actions"})}),(0,Q.jsx)(te.A,{isOpen:"terminate"===p,onClose:N,onComplete:O,selectedRuns:v}),(0,Q.jsx)(q.N,{isOpen:"delete"===p,onClose:N,onComplete:O,onTerminateInstead:function(){return f("terminate")},selectedRuns:C}),(0,Q.jsx)(ee,{isOpen:"reexecute-from-failure"===p,onClose:N,onComplete:O,selectedRuns:k,reexecutionStrategy:o.hmq.FROM_FAILURE}),(0,Q.jsx)(ee,{isOpen:"reexecute"===p,onClose:N,onComplete:O,selectedRuns:Z,reexecutionStrategy:o.hmq.ALL_STEPS})]})})),ce="Launchpad is unavailable because the pipeline is not present in the current repository.",oe=o.ixP,se=t(37751),ae=t(80342),le=function(e){var n=e.runs,t=e.filter,c=e.onAddTag,o=e.nonIdealState,d=e.highlightedIds,h=e.actionBarComponents,p=n.map((function(e){return e.runId})),x=(0,j.a)(p),f=(0,i.Z)(x,2),g=f[0].checkedIds,v=f[1],y=v.onToggleFactory,k=v.onToggleAll,w=(0,m._5)(),Z=w.canTerminatePipelineExecution,R=w.canDeletePipelineRun,I=Z.enabled||R.enabled,N=(0,C.vl)().options;if(0===n.length){var O=Object.keys(t||{}).length;return(0,Q.jsxs)("div",{children:[h?(0,Q.jsx)(s.x,{padding:{vertical:8,left:24,right:12},children:h}):null,(0,Q.jsx)(s.x,{margin:{vertical:32},children:o||(0,Q.jsx)(a.t,{icon:"run",title:O?"No matching runs":"No runs to display",description:O?"No runs were found for this filter.":"Use the Launchpad to launch a run."})})]})}var S,E=!1,T=(0,r.Z)(n);try{for(T.s();!(S=T.n()).done;){var A=S.value,_=A.repositoryOrigin;if(_){var P=(0,b.kQ)(_.repositoryName,_.repositoryLocationName),z=(0,C.qz)(N,P);if(!z||!(0,C.E8)(z,A.pipelineName)){E=!0;break}}}}catch(D){T.e(D)}finally{T.f()}var L=n.filter((function(e){return g.has(e.runId)}));return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(s.x,{flex:{alignItems:"center",gap:12},padding:{vertical:8,left:24,right:12},children:[h,(0,Q.jsx)("div",{style:{flex:1}}),(0,Q.jsx)(ie,{selected:L,clearSelection:function(){return k(!1)}})]}),(0,Q.jsxs)(l.i,{children:[(0,Q.jsx)("thead",{children:(0,Q.jsxs)("tr",{children:[(0,Q.jsx)("th",{style:{width:42,paddingTop:0,paddingBottom:0},children:I?(0,Q.jsx)(u.X,{indeterminate:g.size>0&&g.size!==n.length,checked:g.size===n.length,onChange:function(e){e.target instanceof HTMLInputElement&&k(e.target.checked)}}):null}),(0,Q.jsx)("th",{style:{width:120},children:"Status"}),(0,Q.jsx)("th",{style:{width:90},children:"Run ID"}),(0,Q.jsx)("th",{children:E?"Job / Pipeline":"Job"}),(0,Q.jsx)("th",{style:{width:90},children:"Snapshot ID"}),(0,Q.jsx)("th",{style:{width:190},children:"Timing"}),e.additionalColumnHeaders,(0,Q.jsx)("th",{style:{width:52}})]})}),(0,Q.jsx)("tbody",{children:n.map((function(n){var t;return(0,Q.jsx)(ue,{canTerminateOrDelete:I,run:n,onAddTag:c,checked:g.has(n.runId),additionalColumns:null===(t=e.additionalColumnsForRow)||void 0===t?void 0:t.call(e,n),onToggleChecked:y(n.runId),isHighlighted:d&&d.includes(n.runId)},n.runId)}))})]})]})},ue=function(e){var n=e.run,t=e.canTerminateOrDelete,r=e.onAddTag,i=e.checked,c=e.onToggleChecked,o=e.additionalColumns,a=e.isHighlighted,l=n.pipelineName,m=(0,k._)(n),j=x.useMemo((function(){if(m){var e=m.match.repository.pipelines.find((function(e){return e.name===l}));return!(null===e||void 0===e||!e.isJob)}return!1}),[m,l]);return(0,Q.jsxs)(de,{highlighted:!!a,children:[(0,Q.jsx)("td",{children:t&&c?(0,Q.jsx)(u.X,{checked:!!i,onChange:function(e){if(e.target instanceof HTMLInputElement){var n=e.target.checked,t=e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift");c&&c({checked:n,shiftKey:t})}}}):null}),(0,Q.jsx)("td",{children:(0,Q.jsx)(se.M,{status:n.status,runId:n.runId})}),(0,Q.jsx)("td",{children:(0,Q.jsx)(f.rU,{to:"/runs/".concat(n.runId),children:(0,Q.jsx)(d.fv,{children:(0,B.EI)(n)})})}),(0,Q.jsx)("td",{children:(0,Q.jsxs)(s.x,{flex:{direction:"column",gap:5},children:[(0,g.pv)(n.pipelineName)?(0,Q.jsx)(Z.m,{assetKeys:(0,B.Bo)(n)}):(0,Q.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,Q.jsx)(y.h,{isJob:j,showIcon:!0,pipelineName:n.pipelineName,pipelineHrefContext:"no-link"}),(0,Q.jsx)(f.rU,{to:m?(0,w.jT)({repoName:m.match.repository.name,repoLocation:m.match.repositoryLocation.name,pipelineName:n.pipelineName,isJob:j}):(0,w.r4)(n.pipelineName),children:(0,Q.jsx)(h.JO,{name:"open_in_new",color:p.w.Blue500})})]}),(0,Q.jsx)(ae.Qq,{tags:n.tags,mode:j?"default"!==n.mode?n.mode:null:n.mode,onAddTag:r})]})}),(0,Q.jsx)("td",{children:(0,Q.jsx)(v.J2,{snapshotId:n.pipelineSnapshotId||"",pipelineName:n.pipelineName,size:"normal"})}),(0,Q.jsxs)("td",{children:[(0,Q.jsx)(B.Zr,{run:n}),(0,Q.jsx)(B.Tw,{run:n})]}),o,(0,Q.jsx)("td",{children:(0,Q.jsx)(re,{run:n})})]},n.runId)},de=c.ZP.tr.withConfig({displayName:"RunTable__Row",componentId:"sc-18h8t3i-0"})(["",""],(function(e){return e.highlighted?"box-shadow: inset 3px 3px #bfccd6, inset -3px -3px #bfccd6;":null}))},80342:function(e,n,t){t.d(n,{Qq:function(){return x}});var r=t(47427),i=t(16798),c=t(32030),o=t(325),s=t(13065),a=t(9429),l=t(39061),u=t(28064),d=t(32289),h=new Set([u.H.ScheduleName,u.H.SensorName,u.H.Backfill]),p=(0,i.Z)({},u.H.SolidSelection,u.H.OpSelection),x=o.memo((function(e){var n=e.tags,t=e.onAddTag,i=e.mode,x=(0,a.m)(),f=o.useMemo((function(){return{label:"Copy tag",onClick:function(e){x("".concat(e.key,":").concat(e.value)),s.L.show({intent:"success",message:"Copied tag!"})}}}),[x]),m=o.useMemo((function(){return t?{label:"Add tag to filter",onClick:function(e){t({token:"tag",value:"".concat(e.key,"=").concat(e.value)})}}:null}),[t]),g=function(e){var n,t=[f];return m&&((n=e.key)!==u.H.SolidSelection&&n!==u.H.OpSelection)&&t.push(m),t.filter((function(e){return!!e}))},j=o.useMemo((function(){var e,t=[],i=[],c=n.map((function(e){return{key:e.key,value:e.value}})),o=(0,r.Z)(c);try{for(o.s();!(e=o.n()).done;){var s=e.value,a=s.key;p.hasOwnProperty(a)&&(s.key=p[a]),(!s.value.startsWith(l.u1)||a!==u.H.PartitionSet&&a!==u.H.StepSelection)&&(h.has(a)?t.push(s):i.push(s))}}catch(d){o.e(d)}finally{o.f()}return[].concat(t,i)}),[n]);return n.length?(0,d.jsxs)(c.x,{flex:{direction:"row",wrap:"wrap",gap:4},children:[i?(0,d.jsx)(u.i,{tag:{key:"mode",value:i}}):null,j.map((function(e,n){return(0,d.jsx)(u.i,{tag:e,actions:g(e)},n)}))]}):null}))},77892:function(e,n,t){t.d(n,{l:function(){return l}});var r=t(59019),i=t(95764),c=t(19065),o=t(73701),s=t(325),a=t(44198);function l(e){var n=s.useState((function(){return[]})),t=(0,c.Z)(n,2),l=t[0],u=t[1],d=(0,a.q)({queryKey:"cursor"}),h=(0,c.Z)(d,2),p=h[0],x=h[1],f=(0,i.Z)((0,i.Z)({},e.variables),{},{cursor:p,limit:e.pageSize+1}),m=(0,o.a)(e.query,{partialRefetch:!0,variables:f,notifyOnNetworkStatusChange:!0}),g=e.getResultArray(m.data),j={hasPrevCursor:!!p,hasNextCursor:g.length===e.pageSize+1,popCursor:function(){var e=(0,r.Z)(l);x(e.pop()),u(e)},advanceCursor:function(){p&&u((function(e){return[].concat((0,r.Z)(e),[p])}));var n=m.data&&e.nextCursorForResult(m.data);n&&x(n)},reset:function(){u([]),x(void 0)}};return{queryResult:m,paginationProps:j}}},90933:function(e,n,t){t.d(n,{U:function(){return p}});var r=t(95764),i=t(81034),c=t(922),o=t(8412),s=t(32030),a=t(24971),l=t(7838),u=(t(325),t(74549)),d=t(32289),h=["icon","intent","text","disabled"],p=function(e){var n=e.icon,t=e.intent,c=e.text,a=e.disabled,l=(0,i.Z)(e,h);return a?(0,d.jsx)(o.sN,{disabled:!0,icon:n,intent:t,text:c}):(0,d.jsx)(x,(0,r.Z)((0,r.Z)({},l),{},{children:(0,d.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,o.cR)(n,t),(0,d.jsx)("div",{children:c})]})}))},x=(0,c.ZP)(u.rU).withConfig({displayName:"MenuLink__StyledMenuLink",componentId:"sc-1162pbu-0"})(["text-decoration:none;border-radius:4px;display:block;line-height:20px;padding:6px 8px 6px 12px;transition:background-color 50ms,box-shadow 150ms;align-items:flex-start;user-select:none;","{margin-top:2px;}",":first-child{margin-left:-4px;}&&&:link,&&&:visited,&&&:hover,&&&:active{color:",";text-decoration:none;}&&&:hover{background:",";}"],a.a1,a.a1,l.w.Gray900,l.w.Gray100)}}]);
//# sourceMappingURL=353.81d64e06.chunk.js.map