(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[201],{77523:function(e,n,t){"use strict";t.d(n,{C:function(){return h}});var r=t(19065),o=t(8358),i=t(32030),s=t(75453),a=t(24971),l=t(325),c=t(93141),d=t(76336),u=t(32289),h=function(){var e=l.useContext(d.C5),n=e.allRepos,t=e.visibleRepos,h=e.toggleVisible,f=l.useState(!1),p=(0,r.Z)(f,2),x=p[0],m=p[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:x,style:{width:"auto"},onClose:function(){return m(!1)},children:[(0,u.jsx)(o.fK,{icon:"repo",label:"Filter code locations"}),(0,u.jsx)(c.e,{options:n,onBrowse:function(){return m(!1)},onToggle:h,selected:t}),(0,u.jsx)(o.cN,{children:(0,u.jsx)(i.x,{padding:{top:8},children:(0,u.jsx)(s.zx,{intent:"none",onClick:function(){return m(!1)},children:"Done"})})})]}),(0,u.jsx)(s.zx,{intent:"none",icon:(0,u.jsx)(a.JO,{name:"folder"}),rightIcon:(0,u.jsx)(a.JO,{name:"expand_more"}),onClick:function(){return m(!0)},children:"".concat(t.length," of ").concat(n.length)})]})}},8467:function(e,n,t){"use strict";t.r(n),t.d(n,{OverviewRoot:function(){return _n},default:function(){return An}});var r=t(325),o=t(27601),i=t(95764),s=t(43913),a=t(73701),l=t(30804),c=t(31112),d=t(12745),u=t(32030),h=t(89646),f=t(60736),p=t(47387),x=t(12436),m=t(19102),g=t(78093),v=(t(96560),t(82348)),j=t(31269),w=t(37286),y=t(32289),b=function(e){var n=e.refreshState,t=e.tab;return(0,y.jsxs)(u.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,y.jsxs)(j.mQ,{selectedTabId:t,children:[(0,y.jsx)(w.f,{id:"timeline",title:"Timeline",to:"/overview/timeline"}),(0,y.jsx)(w.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,y.jsx)(w.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,y.jsx)(w.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),(0,y.jsx)(w.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,y.jsx)(u.x,{padding:{bottom:8},children:(0,y.jsx)(m.xi,{refreshState:n})}):null]})},k=t(77892),C=t(50741),T=t(76450),_=function(){(0,g.Px)();var e=(0,a.a)(A),n=(0,k.l)({query:S,variables:{},pageSize:10,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[9])||void 0===n?void 0:n.backfillId:void 0},getResultArray:function(e){return"PartitionBackfills"===(null===e||void 0===e?void 0:e.partitionBackfillsOrError.__typename)?e.partitionBackfillsOrError.results:[]}}),t=n.queryResult,r=n.paginationProps,o=(0,m.C4)(t,m.dT);return(0,v.j)("Backfills"),(0,y.jsxs)(l.T,{children:[(0,y.jsx)(c.m,{title:(0,y.jsx)(d.X6,{children:"Overview"}),tabs:(0,y.jsx)(b,{tab:"backfills",refreshState:o})}),(0,y.jsx)(C.g,{queryResult:t,allowStaleData:!0,children:function(n){var o,s=n.partitionBackfillsOrError;if("PythonError"===s.__typename)return(0,y.jsx)(x.T9,{error:s});if(!s.results.length)return(0,y.jsx)(u.x,{padding:{vertical:64},children:(0,y.jsx)(h.t,{icon:"no-results",title:"No backfills found",description:(0,y.jsx)("p",{children:"This instance does not have any backfill jobs."})})});var a=((null===(o=e.data)||void 0===o?void 0:o.instance.daemonHealth.allDaemonStatuses)||[]).filter((function(e){return"BACKFILL"===e.daemonType})).map((function(e){return e.required&&e.healthy})),l=a.length&&a.every((function(e){return e}));return(0,y.jsxs)("div",{children:[l?null:(0,y.jsx)(u.x,{padding:{horizontal:24,vertical:16},children:(0,y.jsx)(f.b,{intent:"warning",title:"The backfill daemon is not running.",description:(0,y.jsxs)("div",{children:["See the"," ",(0,y.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}),(0,y.jsx)(T.G,{backfills:s.results.slice(0,10),refetch:t.refetch}),s.results.length>0?(0,y.jsx)("div",{style:{marginTop:"16px"},children:(0,y.jsx)(p.b$,(0,i.Z)({},r))}):null]})}})]})},A=s.w36,S=s.R37,N=t(47427),E=t(19065),Z=t(34595),I=t(7838),L=t(88863),z=t(39061),O=t(77523),R=t(76336),M=t(37099),D=t(33902),P=t(11831),U=t(54268),G=t(519),K=t(3580),F=function(e){var n=new Set,t=new Set;return e.forEach((function(e){n.has(e)?t.add(e):n.add(e)})),t},$=t(52848),W=t(76314),V=function(e){return Array.isArray(e)?e:[]},B=function(e,n){var t=function(e,n){return"".concat(e,":dagit.").concat(n)}(r.useContext($.I).basePath,e),o=(0,W.U)(t,V),i=(0,E.Z)(o,2),s=i[0],a=i[1],l=r.useCallback((function(e){var n=(0,D.Uz)(e);a((function(e){var t=new Set(e||[]);return t.has(n)?t.delete(n):t.add(n),Array.from(t)}))}),[a]),c=r.useCallback((function(e){a((function(t){var r=new Set(t||[]);return n.forEach((function(n){e?r.delete(n):r.add(n)})),Array.from(r)}))}),[n,a]),d=r.useMemo((function(){var e=new Set(s);return n.filter((function(n){return!e.has(n)}))}),[n,s]);return r.useMemo((function(){return{expandedKeys:d,onToggle:l,onToggleAll:c}}),[d,l,c])},J=t(82426),H=t(16279),q="overview-collapsed-state",Q=function(e){var n=e.repos,t=r.useRef(null),o=r.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,D.Uz)(n)}))}),[n]),i=B(q,o),s=i.expandedKeys,a=i.onToggle,l=i.onToggleAll,c=r.useMemo((function(){var e=[];return n.forEach((function(n){var t=n.repoAddress,r=n.jobs;e.push({type:"header",repoAddress:t,jobCount:r.length});var o=(0,D.Uz)(t);s.includes(o)&&r.forEach((function(n){var r=n.isJob,o=n.name;e.push({type:"job",repoAddress:t,isJob:r,name:o})}))})),e}),[n,s]),d=F(n.map((function(e){return e.repoAddress.name}))),u=(0,G.useVirtualizer)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),f=u.getVirtualItems();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(J.I,{}),(0,y.jsx)("div",{style:{overflow:"hidden"},children:(0,y.jsx)(K.W2,{ref:t,children:(0,y.jsx)(K.Nh,{$totalHeight:h,children:f.map((function(e){var n=e.index,t=e.key,r=e.size,o=e.start,i=c[n];return"header"===i.type?(0,y.jsx)(H.vG,{repoAddress:i.repoAddress,height:r,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,D.Uz)(i.repoAddress)),showLocation:d.has(i.repoAddress.name),rightElement:(0,y.jsx)(P.u,{content:1===i.jobCount?"1 job":"".concat(i.jobCount," jobs"),placement:"top",children:(0,y.jsx)(U.V,{children:i.jobCount})})},t):(0,y.jsx)(J.b,{name:i.name,isJob:i.isJob,repoAddress:i.repoAddress,height:r,start:o},t)}))})})})]})},Y=t(59019),X=function(e){return(0,Y.Z)(e).sort((function(e,n){var t=(0,D.Uz)(e.repoAddress),r=(0,D.Uz)(n.repoAddress);return t.localeCompare(r)}))},ee=function(e){return new Set(e.map((function(e){return(0,D.Uz)((0,M.kQ)(e.repository.name,e.repositoryLocation.name))})))},ne=function(){(0,g.Px)();var e=r.useState(""),n=(0,E.Z)(e,2),t=n[0],o=n[1],i=r.useContext(R.C5),s=i.allRepos,l=i.visibleRepos,f=s.length,p=(0,a.a)(re,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),x=p.data,v=p.loading,j=(0,m.C4)(p,m.dT),w=r.useMemo((function(){var e=ee(l);return te(x).filter((function(n){var t=n.repoAddress;return e.has((0,D.Uz)(t))}))}),[x,l]),k=t.trim().toLocaleLowerCase(),C=k.length>0,T=r.useMemo((function(){var e=k.toLocaleLowerCase();return w.map((function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter((function(n){return n.name.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.jobs.length>0}))}),[w,k]);return(0,y.jsxs)(u.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,y.jsx)(c.m,{title:(0,y.jsx)(d.X6,{children:"Overview"}),tabs:(0,y.jsx)(b,{tab:"jobs",refreshState:j})}),(0,y.jsxs)(u.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[f>1?(0,y.jsx)(O.C,{}):null,(0,y.jsx)(L.oi,{icon:"search",value:t,onChange:function(e){return o(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"340px"}})]}),v&&!f?(0,y.jsx)(u.x,{padding:64,children:(0,y.jsx)(Z.$,{purpose:"page"})}):function(){if(v&&!x)return(0,y.jsx)(u.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,y.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,y.jsx)(Z.$,{purpose:"body-text"}),(0,y.jsx)("div",{style:{color:I.w.Gray600},children:"Loading jobs\u2026"})]})});var e=s.length>l.length;return T.length?(0,y.jsx)(Q,{repos:T}):C?(0,y.jsx)(u.x,{padding:{top:20},children:(0,y.jsx)(h.t,{icon:"search",title:"No matching jobs",description:e?(0,y.jsxs)("div",{children:["No jobs matching ",(0,y.jsx)("strong",{children:t})," were found in the selected code locations"]}):(0,y.jsxs)("div",{children:["No jobs matching ",(0,y.jsx)("strong",{children:t})," were found in your definitions"]})})}):(0,y.jsx)(u.x,{padding:{top:20},children:(0,y.jsx)(h.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},te=function(e){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,t=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),r=[],o=(0,N.Z)(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("RepositoryLocation"===(null===i||void 0===i?void 0:i.__typename)){var s,a=(0,N.Z)(i.repositories);try{for(a.s();!(s=a.n()).done;){var l=s.value,c=l.name,d=l.pipelines,u=(0,M.kQ)(c,i.name),h=d.filter((function(e){var n=e.name;return!(0,z.pv)(n)})).map((function(e){return{isJob:e.isJob,name:e.name}}));h.length>0&&r.push({repoAddress:u,jobs:h})}}catch(f){a.e(f)}finally{a.f()}}}}catch(f){o.e(f)}finally{o.f()}return X(r)},re=s.FHf,oe=t(75453),ie=t(8358),se=t(60857),ae=t(89324),le=t(31834),ce=function(e){var n=e.repos,t=r.useRef(null),o=r.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,D.Uz)(n)}))}),[n]),i=B(q,o),s=i.expandedKeys,a=i.onToggle,l=i.onToggleAll,c=r.useMemo((function(){var e=[];return n.forEach((function(n){var t=n.repoAddress,r=n.schedules;e.push({type:"header",repoAddress:t,scheduleCount:r.length});var o=(0,D.Uz)(t);s.includes(o)&&r.forEach((function(n){e.push({type:"schedule",repoAddress:t,name:n})}))})),e}),[n,s]),d=F(n.map((function(e){return e.repoAddress.name}))),u=(0,G.useVirtualizer)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),f=u.getVirtualItems();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(le.o,{}),(0,y.jsx)("div",{style:{overflow:"hidden"},children:(0,y.jsx)(K.W2,{ref:t,children:(0,y.jsx)(K.Nh,{$totalHeight:h,children:f.map((function(e){var n=e.index,t=e.key,r=e.size,o=e.start,i=c[n];return"header"===i.type?(0,y.jsx)(H.vG,{repoAddress:i.repoAddress,height:r,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,D.Uz)(i.repoAddress)),showLocation:d.has(i.repoAddress.name),rightElement:(0,y.jsx)(P.u,{content:1===i.scheduleCount?"1 schedule":"".concat(i.scheduleCount," schedules"),placement:"top",children:(0,y.jsx)(U.V,{children:i.scheduleCount})})},t):(0,y.jsx)(le.i,{name:i.name,repoAddress:i.repoAddress,height:r,start:o},t)}))})})})]})},de=function(){(0,g.Px)();var e=r.useState(""),n=(0,E.Z)(e,2),t=n[0],o=n[1],i=r.useContext(R.C5),s=i.allRepos,l=i.visibleRepos,f=s.length,p=(0,a.a)(pe,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),x=p.data,v=p.loading,j=(0,m.C4)(p,m.dT),w=r.useMemo((function(){var e=ee(l);return fe(x).filter((function(n){var t=n.repoAddress;return e.has((0,D.Uz)(t))}))}),[x,l]),k=t.trim().toLocaleLowerCase(),C=k.length>0,T=r.useMemo((function(){var e=k.toLocaleLowerCase();return w.map((function(n){return{repoAddress:n.repoAddress,schedules:n.schedules.filter((function(n){return n.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.schedules.length>0}))}),[w,k]);return(0,y.jsxs)(u.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,y.jsx)(c.m,{title:(0,y.jsx)(d.X6,{children:"Overview"}),tabs:(0,y.jsx)(b,{tab:"schedules",refreshState:j})}),(0,y.jsxs)(u.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[f>0?(0,y.jsx)(O.C,{}):null,(0,y.jsx)(L.oi,{icon:"search",value:t,onChange:function(e){return o(e.target.value)},placeholder:"Filter by schedule name\u2026",style:{width:"340px"}})]}),v&&!f?(0,y.jsx)(u.x,{padding:64,children:(0,y.jsx)(Z.$,{purpose:"page"})}):(0,y.jsxs)(y.Fragment,{children:["InstigationStates"===(null===x||void 0===x?void 0:x.unloadableInstigationStatesOrError.__typename)?(0,y.jsx)(ue,{count:x.unloadableInstigationStatesOrError.results.length}):null,(0,y.jsx)(u.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:I.w.KeylineGray},children:(0,y.jsx)(ae.K,{daemonHealth:null===x||void 0===x?void 0:x.instance.daemonHealth})}),function(){if(v&&!x)return(0,y.jsx)(u.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,y.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,y.jsx)(Z.$,{purpose:"body-text"}),(0,y.jsx)("div",{style:{color:I.w.Gray600},children:"Loading schedules\u2026"})]})});var e=s.length>l.length;return T.length?(0,y.jsx)(ce,{repos:T}):C?(0,y.jsx)(u.x,{padding:{top:20},children:(0,y.jsx)(h.t,{icon:"search",title:"No matching schedules",description:e?(0,y.jsxs)("div",{children:["No schedules matching ",(0,y.jsx)("strong",{children:t})," were found in the selected code locations"]}):(0,y.jsxs)("div",{children:["No schedules matching ",(0,y.jsx)("strong",{children:t})," were found in your definitions"]})})}):(0,y.jsx)(u.x,{padding:{top:20},children:(0,y.jsx)(h.t,{icon:"search",title:"No schedules",description:e?"No schedules were found in the selected code locations":"No schedules were found in your definitions"})})}()]})]})},ue=function(e){var n=e.count,t=r.useState(!1),o=(0,E.Z)(t,2),i=o[0],s=o[1];if(!n)return null;var a=1===n?"1 unloadable schedule":"".concat(n," unloadable schedules");return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:I.w.KeylineGray},children:(0,y.jsx)(f.b,{intent:"warning",title:a,description:(0,y.jsxs)(u.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,y.jsx)("div",{children:"Schedules were previously started but now cannot be loaded. They may be part of a code locations that no longer exist. You can turn them off, but you cannot turn them back on."}),(0,y.jsx)(oe.zx,{onClick:function(){return s(!0)},children:1===n?"View unloadable schedule":"View unloadable schedules"})]})})}),(0,y.jsxs)(ie.Vq,{isOpen:i,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,y.jsx)(u.x,{padding:{bottom:8},children:(0,y.jsx)(he,{})}),(0,y.jsx)(ie.cN,{children:(0,y.jsx)(oe.zx,{intent:"primary",onClick:function(){return s(!1)},children:"Done"})})]})]})},he=function(){var e=(0,a.a)(xe).data;return e?"InstigationStates"===(null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError.__typename)?(0,y.jsx)(se.Y,{scheduleStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,y.jsx)(x.T9,{error:null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError}):(0,y.jsx)(Z.$,{purpose:"section"})},fe=function(e){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,t=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),r=[],o=(0,N.Z)(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("RepositoryLocation"===(null===i||void 0===i?void 0:i.__typename)){var s,a=(0,N.Z)(i.repositories);try{for(a.s();!(s=a.n()).done;){var l=s.value,c=l.name,d=l.schedules,u=(0,M.kQ)(c,i.name),h=d.map((function(e){return e.name}));h.length>0&&r.push({repoAddress:u,schedules:h})}}catch(f){a.e(f)}finally{a.f()}}}}catch(f){o.e(f)}finally{o.f()}return X(r)},pe=s.Bq_,xe=s.Z4g,me=t(57466),ge=t(19377),ve=function(e){var n=e.repos,t=r.useRef(null),o=r.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,D.Uz)(n)}))}),[n]),i=B(q,o),s=i.expandedKeys,a=i.onToggle,l=i.onToggleAll,c=r.useMemo((function(){var e=[];return n.forEach((function(n){var t=n.repoAddress,r=n.sensors;e.push({type:"header",repoAddress:t,sensorCount:r.length});var o=(0,D.Uz)(t);s.includes(o)&&r.forEach((function(n){e.push({type:"sensor",repoAddress:t,name:n})}))})),e}),[n,s]),d=F(n.map((function(e){return e.repoAddress.name}))),u=(0,G.useVirtualizer)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),f=u.getVirtualItems();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ge.K,{}),(0,y.jsx)("div",{style:{overflow:"hidden"},children:(0,y.jsx)(K.W2,{ref:t,children:(0,y.jsx)(K.Nh,{$totalHeight:h,children:f.map((function(e){var n=e.index,t=e.key,r=e.size,o=e.start,i=c[n];return"header"===i.type?(0,y.jsx)(H.vG,{repoAddress:i.repoAddress,height:r,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,D.Uz)(i.repoAddress)),showLocation:d.has(i.repoAddress.name),rightElement:(0,y.jsx)(P.u,{content:1===i.sensorCount?"1 sensor":"".concat(i.sensorCount," sensors"),placement:"top",children:(0,y.jsx)(U.V,{children:i.sensorCount})})},t):(0,y.jsx)(ge.R,{name:i.name,repoAddress:i.repoAddress,height:r,start:o},t)}))})})})]})},je=function(){(0,g.Px)();var e=r.useState(""),n=(0,E.Z)(e,2),t=n[0],o=n[1],i=r.useContext(R.C5),s=i.allRepos,l=i.visibleRepos,f=s.length,p=(0,a.a)(ke,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),x=p.data,v=p.loading,j=(0,m.C4)(p,m.dT),w=r.useMemo((function(){var e=ee(l);return be(x).filter((function(n){var t=n.repoAddress;return e.has((0,D.Uz)(t))}))}),[x,l]),k=t.trim().toLocaleLowerCase(),C=k.length>0,T=r.useMemo((function(){var e=k.toLocaleLowerCase();return w.map((function(n){return{repoAddress:n.repoAddress,sensors:n.sensors.filter((function(n){return n.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.sensors.length>0}))}),[w,k]);return(0,y.jsxs)(u.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,y.jsx)(c.m,{title:(0,y.jsx)(d.X6,{children:"Overview"}),tabs:(0,y.jsx)(b,{tab:"sensors",refreshState:j})}),(0,y.jsxs)(u.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[f>0?(0,y.jsx)(O.C,{}):null,(0,y.jsx)(L.oi,{icon:"search",value:t,onChange:function(e){return o(e.target.value)},placeholder:"Filter by sensor name\u2026",style:{width:"340px"}})]}),v&&!f?(0,y.jsx)(u.x,{padding:64,children:(0,y.jsx)(Z.$,{purpose:"page"})}):(0,y.jsxs)(y.Fragment,{children:["InstigationStates"===(null===x||void 0===x?void 0:x.unloadableInstigationStatesOrError.__typename)?(0,y.jsx)(we,{count:x.unloadableInstigationStatesOrError.results.length}):null,(0,y.jsx)(me.F,{daemonHealth:null===x||void 0===x?void 0:x.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:I.w.KeylineGray}}),function(){if(v&&!x)return(0,y.jsx)(u.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,y.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,y.jsx)(Z.$,{purpose:"body-text"}),(0,y.jsx)("div",{style:{color:I.w.Gray600},children:"Loading sensors\u2026"})]})});var e=s.length>l.length;return T.length?(0,y.jsx)(ve,{repos:T}):C?(0,y.jsx)(u.x,{padding:{top:20},children:(0,y.jsx)(h.t,{icon:"search",title:"No matching sensors",description:e?(0,y.jsxs)("div",{children:["No sensors matching ",(0,y.jsx)("strong",{children:t})," were found in the selected code locations"]}):(0,y.jsxs)("div",{children:["No sensors matching ",(0,y.jsx)("strong",{children:t})," were found in your definitions"]})})}):(0,y.jsx)(u.x,{padding:{top:20},children:(0,y.jsx)(h.t,{icon:"search",title:"No sensors",description:e?"No sensors were found in the selected code locations":"No sensors were found in your definitions"})})}()]})]})},we=function(e){var n=e.count,t=r.useState(!1),o=(0,E.Z)(t,2),i=o[0],s=o[1];if(!n)return null;var a=1===n?"1 unloadable sensor":"".concat(n," unloadable sensors");return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:I.w.KeylineGray},children:(0,y.jsx)(f.b,{intent:"warning",title:a,description:(0,y.jsxs)(u.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,y.jsx)("div",{children:"Sensors were previously started but now cannot be loaded. They may be part of a code location that no longer exists. You can turn them off, but you cannot turn them back on."}),(0,y.jsx)(oe.zx,{onClick:function(){return s(!0)},children:1===n?"View unloadable sensor":"View unloadable sensors"})]})})}),(0,y.jsxs)(ie.Vq,{isOpen:i,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,y.jsx)(u.x,{padding:{bottom:8},children:(0,y.jsx)(ye,{})}),(0,y.jsx)(ie.cN,{children:(0,y.jsx)(oe.zx,{intent:"primary",onClick:function(){return s(!1)},children:"Done"})})]})]})},ye=function(){var e=(0,a.a)(Ce).data;return e?"InstigationStates"===(null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError.__typename)?(0,y.jsx)(se.e,{sensorStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,y.jsx)(x.T9,{error:null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError}):(0,y.jsx)(Z.$,{purpose:"section"})},be=function(e){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,t=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),r=[],o=(0,N.Z)(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("RepositoryLocation"===(null===i||void 0===i?void 0:i.__typename)){var s,a=(0,N.Z)(i.repositories);try{for(a.s();!(s=a.n()).done;){var l=s.value,c=l.name,d=l.sensors,u=(0,M.kQ)(c,i.name),h=d.map((function(e){return e.name}));h.length>0&&r.push({repoAddress:u,sensors:h})}}catch(f){a.e(f)}finally{a.f()}}}}catch(f){o.e(f)}finally{o.f()}return X(r)},ke=s.nI7,Ce=s.l75,Te=t(87011),_e=t(16798),Ae=t(922),Se=t(8546),Ne=t(24971),Ee=t(14198),Ze=t(762),Ie=t(74549),Le=t(68156),ze=t(28797),Oe=t(37971),Re=t(7489),Me=t(36114),De=t(35815),Pe=t(59549),Ue=t(34653),Ge=t(32460),Ke=function(e,n){return!(e.end<n.start||n.end<e.start)},Fe=function(e,n,t,r){var o=e.left,i=e.left+Math.max(e.width,t),s=n.left,a=n.left+Math.max(n.width,t),l=Math.min(e.left,n.left),c=Math.max(e.left+Math.max(e.width,t),n.left+Math.max(n.width,t));return Ke({start:o,end:i},{start:s,end:a})&&(l>r||c<r)},$e=function(e){switch(e){case"queued":case"scheduled":return I.w.Blue200;case"inProgress":return I.w.Blue500;case"failed":return I.w.Red500;case"succeeded":return I.w.Green500}},We=function(e){var n={scheduled:0,queued:0,inProgress:0,failed:0,succeeded:0};e.forEach((function(e){var t=e.status;"SCHEDULED"===t?n.scheduled++:Ue.sy.has(t)?n.queued++:Ue.Ys.has(t)?n.inProgress++:Ue.hd.has(t)?n.failed++:Ue._m.has(t)&&n.succeeded++}));var t=Object.keys(n).filter((function(e){return n[e]>0}));if(1===t.length){var r=(0,E.Z)(t,1)[0];return $e(r)}for(var o=e.length,i=[n.failed>0?{status:"failed",pct:100*n.failed/o}:null,n.succeeded>0?{status:"succeeded",pct:100*n.succeeded/o}:null,n.inProgress>0?{status:"inProgress",pct:100*n.inProgress/o}:null,n.queued>0?{status:"queued",pct:100*n.queued/o}:null,n.scheduled>0?{status:"scheduled",pct:100*n.scheduled/o}:null].filter(Boolean),s="",a=0,l=0,c=0;c<i.length;c++){var d=i[c];if(d){var u=d.status,h=d.pct;l=a,a+=h;var f=$e(u);0===c?s+="".concat(f," ").concat(h.toFixed(1),"%, "):c===i.length-1?s+="".concat(f," ").concat(l.toFixed(1),"%"):s+="".concat(f," ").concat(l.toFixed(1),"% ").concat(a.toFixed(1),"%, ")}}return"linear-gradient(to right, ".concat(s,")")},Ve=32,Be=function(e){var n=e.loading,t=void 0!==n&&n,o=e.jobs,s=e.range,a=r.useState(null),l=(0,E.Z)(a,2),c=l[0],d=l[1],h=Date.now(),f=(0,E.Z)(s,2),p=(f[0],h<=f[1]),x=o.reduce((function(e,n){var t=n.repoAddress,r=(0,D.Qj)(t),o=e[r]||[];return(0,i.Z)((0,i.Z)({},e),{},(0,_e.Z)({},r,[].concat((0,Y.Z)(o),[n])))}),{}),m=Object.keys(x),g=B(q,m),v=g.expandedKeys,j=g.onToggle,w=g.onToggleAll,b=r.useRef(null),k=r.useCallback((function(e){var n;e?(b.current=new ResizeObserver((function(e){var n=e[0];d(n.contentRect.width)})),b.current.observe(e)):null===(n=b.current)||void 0===n||n.disconnect()}),[]);if(!c)return(0,y.jsx)(hn,{$height:174,ref:k,children:(0,y.jsx)("div",{})});var C=Object.keys(x).sort((function(e,n){return e.localeCompare(n)})),T=64,_=C.filter((function(e){return v.includes(e)})).reduce((function(e,n){return e+x[n].length}),0),A=C.length*De.l+Ve*_,S=F(C.map((function(e){var n;return(null===(n=(0,Me.g)(e))||void 0===n?void 0:n.name)||""}))),N=C.length>0,Z=64+(N?A:110);return(0,y.jsxs)(hn,{$height:Z,ref:k,children:[(0,y.jsx)(u.x,{padding:{left:24},flex:{direction:"column",justifyContent:"center"},style:{fontSize:"16px",height:64},border:{side:"top",width:1,color:I.w.KeylineGray},children:"Jobs"}),(0,y.jsx)(nn,{interval:36e5,range:s,height:N?A:0}),C.length?C.map((function(e){var n,t=null===(n=(0,Me.g)(e))||void 0===n?void 0:n.name,r=x[e],o=T,i=v.includes(e);return T=o+De.l+(i?r.length*Ve:0),(0,y.jsx)(Je,{expanded:i,range:s,top:o,repoKey:e,isDuplicateRepoName:!(!t||!S.has(t)),jobs:x[e],onToggle:j,onToggleAll:w,width:c},e)})):(0,y.jsx)(un,{loading:t,includesTicks:p})]})},Je=function(e){var n=e.expanded,t=e.onToggle,o=e.onToggleAll,i=e.repoKey,s=e.isDuplicateRepoName,a=e.jobs,l=e.range,c=e.top,d=e.width,u=(0,Me.g)(i),h=(null===u||void 0===u?void 0:u.name)||"Unknown repo",f=(null===u||void 0===u?void 0:u.location)||"Unknown location",p=r.useCallback((function(e){e.getModifierState("Shift")?o(!n):u&&t(u)}),[n,t,o,u]);return(0,y.jsxs)("div",{children:[(0,y.jsx)(Qe,{$top:c,children:(0,y.jsx)(De.L,{expanded:n,repoName:h,repoLocation:f,onClick:p,showLocation:s,rightElement:(0,y.jsx)(He,{jobs:a})})}),n?a.map((function(e,n){return(0,y.jsx)(dn,{job:e,top:c+De.l+n*Ve,range:l,width:d},e.key)})):null]})},He=r.memo((function(e){var n=e.jobs,t=r.useMemo((function(){var e=0,t=0,r=0;return n.forEach((function(n){n.runs.forEach((function(n){var o=n.status;"SCHEDULED"!==o&&(Ue.Ys.has(o)?e++:Ue.hd.has(o)?t++:Ue._m.has(o)&&r++)}))})),{inProgressCount:e,failedCount:t,succeededCount:r}}),[n]),o=t.inProgressCount,i=t.failedCount,s=t.succeededCount,a=1===o?"1 run in progress":"".concat(o," runs in progress"),l=1===s?"1 run succeeded":"".concat(s," runs succeeded"),c=1===i?"1 run failed":"".concat(i," runs failed");return(0,y.jsxs)(u.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[o>0?(0,y.jsx)(P.u,{content:(0,y.jsx)(qe,{children:a}),placement:"top",children:(0,y.jsx)(U.V,{intent:"primary",children:o})}):null,s>0?(0,y.jsx)(P.u,{content:(0,y.jsx)(qe,{children:l}),placement:"top",children:(0,y.jsx)(U.V,{intent:"success",children:s})}):null,i>0?(0,y.jsx)(P.u,{content:(0,y.jsx)(qe,{children:c}),placement:"top",children:(0,y.jsx)(U.V,{intent:"danger",children:i})}):null]})})),qe=Ae.ZP.span.withConfig({displayName:"RunTimeline__StatusSpan",componentId:"sc-1k6kbha-0"})(["white-space:nowrap;"]),Qe=Ae.ZP.div.withConfig({displayName:"RunTimeline__SectionHeaderContainer",componentId:"sc-1k6kbha-1"})(["position:absolute;top:0;left:0;right:0;",""],(function(e){var n=e.$top;return"transform: translateY(".concat(n,"px);")})),Ye={month:"numeric",day:"numeric",year:"numeric"},Xe={month:"numeric",day:"numeric",year:"numeric",timeZoneName:"short"},en={hour:"numeric"},nn=function(e){var n=e.interval,t=e.range,o=e.height,s=(0,E.Z)(t,2),a=s[0],l=s[1],c=function(){var e=r.useContext(Oe.jA),n=(0,E.Z)(e,1)[0],t="Automatic"===n?(0,Re.cw)():n;return r.useCallback((function(e,n){return Intl.DateTimeFormat(navigator.language,(0,i.Z)({timeZone:t},n)).format(e)}),[t])}(),d=r.useMemo((function(){for(var e=l-a,n=new Date(a),t=c(n,Xe),r=[],o=new Date(t);o.valueOf()<l;){var i=o.getTime(),s=new Date(i).setDate(o.getDate()+1);o=new Date(s),r.push({dayStart:i,dayEnd:s})}return r.map((function(n){var t=n.dayStart,r=n.dayEnd,o=new Date(t),i=t-a,s=i+(r-t),l=Math.max(0,i/e*100),d=Math.min(100,s/e*100);return{label:c(o,Ye),key:o.toString(),left:l,width:d-l}}))}),[l,c,a]),h=r.useMemo((function(){var e=l-a,t=a-a%n,r=Math.ceil(e/n)+1;return(0,Y.Z)(new Array(r)).map((function(r,o){var i=t+o*n,s=new Date(i);return{label:c(s,en).replace(" ",""),key:s.toString(),left:(i-a)/e*100}})).filter((function(e){return e.left>0}))}),[l,a,n,c]),f=Date.now(),p="".concat(((f-a)/(l-a)*100).toPrecision(3),"%");return(0,y.jsxs)(tn,{style:{height:"".concat(o,"px")},children:[(0,y.jsx)(rn,{children:d.map((function(e){return(0,y.jsx)(on,{style:{left:"".concat(e.left.toPrecision(3),"%"),width:"".concat(e.width.toPrecision(3),"%")},children:e.width>10?(0,y.jsx)(u.x,{flex:{justifyContent:"center"},children:e.label}):null},e.key)}))}),(0,y.jsx)(rn,{children:h.map((function(e){return(0,y.jsx)(sn,{style:{left:"".concat(e.left.toPrecision(3),"%")},children:e.label},e.key)}))}),(0,y.jsxs)(an,{children:[(0,y.jsx)(ln,{style:{left:0,backgroundColor:I.w.Gray200}}),h.map((function(e){return(0,y.jsx)(ln,{style:{left:"".concat(e.left.toPrecision(3),"%")}},e.key)})),f>=a&&f<=l?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(cn,{style:{left:p},children:"Now"}),(0,y.jsx)(ln,{style:{left:p,backgroundColor:I.w.Blue500,zIndex:1}})]}):null]})]})},tn=Ae.ZP.div.withConfig({displayName:"RunTimeline__DividerContainer",componentId:"sc-1k6kbha-2"})(["position:absolute;top:0;left:","px;right:0;font-family:",";color:",";"],320,Se.b.monospace,I.w.Gray800),rn=Ae.ZP.div.withConfig({displayName:"RunTimeline__DividerLabels",componentId:"sc-1k6kbha-3"})(["display:flex;align-items:center;box-shadow:inset 1px 0 0 ",",inset 0 1px 0 ",",inset -1px 0 0 ",";height:","px;position:relative;user-select:none;font-size:12px;width:100%;overflow:hidden;"],I.w.KeylineGray,I.w.KeylineGray,I.w.KeylineGray,32),on=Ae.ZP.div.withConfig({displayName:"RunTimeline__DateLabel",componentId:"sc-1k6kbha-4"})(["position:absolute;padding:8px 0;box-shadow:inset 1px 0 0 ",";white-space:nowrap;"],I.w.KeylineGray),sn=Ae.ZP.div.withConfig({displayName:"RunTimeline__TimeLabel",componentId:"sc-1k6kbha-5"})(["position:absolute;padding:8px;box-shadow:inset 1px 0 0 ",";white-space:nowrap;"],I.w.KeylineGray),an=Ae.ZP.div.withConfig({displayName:"RunTimeline__DividerLines",componentId:"sc-1k6kbha-6"})(["height:100%;position:relative;width:100%;box-shadow:inset 1px 0 0 ",",inset -1px 0 0 ",";"],I.w.KeylineGray,I.w.KeylineGray),ln=Ae.ZP.div.withConfig({displayName:"RunTimeline__DividerLine",componentId:"sc-1k6kbha-7"})(["background-color:",";height:100%;position:absolute;top:0;width:1px;"],I.w.KeylineGray),cn=Ae.ZP.div.withConfig({displayName:"RunTimeline__NowMarker",componentId:"sc-1k6kbha-8"})(["background-color:",";border-radius:1px;color:",";cursor:default;font-size:12px;line-height:12px;margin-left:-12px;padding:1px 4px;position:absolute;top:-14px;user-select:none;"],I.w.Blue500,I.w.White),dn=function(e){var n=e.job,t=e.top,o=e.range,i=e.width,s=(0,E.Z)(o,2),a=s[0],l=s[1],c=i-320,d=n.runs,h=r.useMemo((function(){var e=function(e){for(var n=e.runs,t=e.start,r=e.end,o=e.width,i=e.minChunkWidth,s=e.minMultipleWidth,a=r-t,l=(Date.now()-t)/(r-t)*o,c=n.map((function(e){var n=e.startTime,r=e.endTime||Date.now();return{runs:[e],startTime:n,endTime:r,left:Math.max(0,Math.floor((n-t)/a*o)),width:Math.max(i,Math.min(Math.ceil((r-n)/a*o),Math.ceil((r-t)/a*o)))}})).sort((function(e,n){return n.left-e.left})),d=[];c.length;){var u=c.shift(),h=c[0];if(u)if(h&&Fe(u,h,s,l)){c.shift(),u.runs=[].concat((0,Y.Z)(u.runs),(0,Y.Z)(h.runs)),u.startTime=Math.min(u.startTime,h.startTime),u.endTime=Math.max(u.endTime,h.endTime);var f=Math.max(u.left+s,u.left+u.width,h.left+h.width),p=Math.min(u.left,h.left);u.width=f-p,u.left=p,c.unshift(u)}else d.push(u)}return d}({runs:d,start:a,end:l,width:c,minChunkWidth:2,minMultipleWidth:12});return e}),[d,a,l,c]);return n.runs.length?(0,y.jsxs)(fn,{$top:t,children:[(0,y.jsxs)(pn,{children:[(0,y.jsx)(Ne.JO,{name:"asset"===n.jobType?"asset":"job"}),(0,y.jsx)("div",{style:{width:268},children:"asset"===n.jobType?(0,y.jsx)("span",{style:{color:I.w.Gray900},children:(0,y.jsx)(Ee.g,{text:n.jobName})}):(0,y.jsx)(Ie.rU,{to:n.path,children:(0,y.jsx)(Ee.g,{text:n.jobName})})})]}),(0,y.jsx)(xn,{children:h.map((function(e){var t=e.left,r=e.width,o=e.runs.length;return(0,y.jsx)(mn,{$background:We(e.runs),$multiple:o>1,style:{left:"".concat(t,"px"),width:"".concat(r,"px")},children:(0,y.jsx)(Ze.J,{content:(0,y.jsx)(vn,{job:n,batch:e}),position:"top",interactionKind:"hover",className:"chunk-popover-target",children:(0,y.jsx)(u.x,{flex:{direction:"row",justifyContent:"center",alignItems:"center"},style:{height:"100%"},children:o>1?(0,y.jsx)(gn,{children:e.runs.length}):null})})},e.runs[0].id)}))})]}):null},un=function(e){var n=e.loading,t=e.includesTicks;return(0,y.jsx)(u.x,{background:I.w.White,padding:{vertical:24},flex:{direction:"row",justifyContent:"center"},border:{side:"horizontal",width:1,color:I.w.KeylineGray},children:n?(0,y.jsxs)(u.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,y.jsx)(Z.$,{purpose:"body-text"}),t?"Loading runs and scheduled ticks":"Loading runs"]}):(0,y.jsxs)(u.x,{flex:{direction:"column",gap:12,alignItems:"center"},children:[(0,y.jsx)("div",{children:t?"No runs or scheduled ticks in this time period.":"No runs in this time period."}),(0,y.jsxs)(u.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,y.jsx)(ze.A,{icon:(0,y.jsx)(Ne.JO,{name:"add_circle"}),to:"/overview/jobs",children:"Launch a run"}),(0,y.jsx)("span",{children:"or"}),(0,y.jsx)(ze.A,{icon:(0,y.jsx)(Ne.JO,{name:"materialization"}),to:"/asset-groups",children:"Materialize an asset"})]})]})})},hn=Ae.ZP.div.withConfig({displayName:"RunTimeline__Timeline",componentId:"sc-1k6kbha-9"})([""," position:relative;"],(function(e){var n=e.$height;return"height: ".concat(n,"px;")})),fn=Ae.ZP.div.withConfig({displayName:"RunTimeline__Row",componentId:"sc-1k6kbha-10"})(["align-items:center;box-shadow:inset 0 -1px 0 ",";display:flex;flex-direction:row;width:100%;height:","px;padding:1px 0;position:absolute;left:0;top:0;",":first-child,:hover{box-shadow:inset 0 1px 0 ",",inset 0 -1px 0 ",";}:hover{background-color:",";}"],I.w.KeylineGray,33,(function(e){var n=e.$top;return"transform: translateY(".concat(n,"px);")}),I.w.KeylineGray,I.w.KeylineGray,I.w.Gray10),pn=Ae.ZP.div.withConfig({displayName:"RunTimeline__JobName",componentId:"sc-1k6kbha-11"})(["align-items:center;display:flex;font-size:13px;justify-content:flex-start;gap:8px;line-height:16px;overflow:hidden;padding:0 12px 0 24px;text-overflow:ellipsis;white-space:nowrap;width:","px;"],320),xn=Ae.ZP.div.withConfig({displayName:"RunTimeline__RunChunks",componentId:"sc-1k6kbha-12"})(["flex:1;position:relative;height:","px;"],Ve),mn=Ae.ZP.div.withConfig({displayName:"RunTimeline__RunChunk",componentId:"sc-1k6kbha-13"})(["align-items:center;background:",";border-radius:2px;height:","px;position:absolute;top:2px;",";transition:background-color 300ms linear,width 300ms ease-in-out;.chunk-popover-target{display:block;height:100%;width:100%;}"],(function(e){return e.$background}),28,(function(e){return e.$multiple?"min-width: ".concat(12,"px"):null})),gn=Ae.ZP.div.withConfig({displayName:"RunTimeline__BatchCount",componentId:"sc-1k6kbha-14"})(["color:",";cursor:default;font-family:",";font-size:14px;font-weight:600;user-select:none;"],I.w.White,Se.b.monospace),vn=function(e){var n=e.job,t=e.batch,r=t.runs.slice(0,50),o=t.runs.length-r.length;return(0,y.jsxs)(u.x,{style:{width:"260px"},children:[(0,y.jsx)(u.x,{padding:12,border:{side:"bottom",width:1,color:I.w.KeylineGray},children:(0,y.jsx)(jn,{children:n.jobName})}),(0,y.jsx)("div",{style:{maxHeight:"240px",overflowY:"auto"},children:r.map((function(e,n){return(0,y.jsxs)(u.x,{border:n>0?{side:"top",width:1,color:I.w.KeylineGray}:null,flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},padding:{vertical:8,horizontal:12},children:[(0,y.jsxs)(u.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,y.jsx)(Pe.O_,{status:e.status,size:8}),"SCHEDULED"===e.status?"Scheduled":(0,y.jsx)(Ie.rU,{to:"/runs/".concat(e.id),children:(0,y.jsx)(d.fv,{children:e.id.slice(0,8)})})]}),(0,y.jsx)(d.fv,{children:"SCHEDULED"===e.status?(0,y.jsx)(Le.v,{timestamp:e.startTime/1e3}):(0,y.jsx)(Ge.Q,{startUnix:e.startTime/1e3,endUnix:e.endTime/1e3})})]},e.id)}))}),o>0?(0,y.jsx)(u.x,{padding:12,border:{side:"top",width:1,color:I.w.KeylineGray},children:(0,y.jsxs)(Ie.rU,{to:"".concat(n.path,"runs"),children:["+ ",o," more"]})}):null]})},jn=Ae.ZP.strong.withConfig({displayName:"RunTimeline__HoverContentJobName",componentId:"sc-1k6kbha-15"})(["display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;"]),wn=t(25582),yn=function(e,n){return"".concat(n,"-").concat((0,D.Uz)(e))},bn=s.TOz,kn=36e5,Cn=function(e){switch(e){case"1":return kn;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},Tn=function(){(0,g.Px)(),(0,v.j)("Runs");var e=r.useContext(R.C5),n=e.allRepos,t=e.visibleRepos,o=r.useState(""),h=(0,E.Z)(o,2),f=h[0],p=h[1],x=function(e){var n=r.useCallback((function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}}),[e]),t=(0,W.U)("dagit.run-timeline-hour-window",n),o=(0,E.Z)(t,2),i=o[0],s=o[1],a=r.useCallback((function(n){s(n||e)}),[e,s]);return r.useMemo((function(){return[i,a]}),[i,a])}("12"),j=(0,E.Z)(x,2),w=j[0],k=j[1],C=r.useState((function(){return Date.now()})),T=(0,E.Z)(C,2),_=T[0],A=T[1],S=r.useState((function(){return 0})),Z=(0,E.Z)(S,2),I=Z[0],D=Z[1];r.useEffect((function(){A(Date.now());var e=setInterval((function(){A(Date.now())}),6e4);return function(){clearInterval(e)}}),[w]);var P=r.useCallback((function(){D((function(e){return e-Cn(w)}))}),[w]),U=r.useCallback((function(){D((function(e){return e+Cn(w)}))}),[w]),G=r.useCallback((function(){D(0)}),[]),K=r.useMemo((function(){return[_-Number(w)*kn+I,_+36e5+I]}),[w,_,I]),F=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,E.Z)(e,2),o=t[0],l=t[1],c=o/1e3,d=l/1e3,u=(0,a.a)(bn,{notifyOnNetworkStatusChange:!0,variables:{inProgressFilter:(0,i.Z)((0,i.Z)({},n),{},{statuses:[s.VOA.CANCELING,s.VOA.STARTED],createdBefore:d}),terminatedFilter:(0,i.Z)((0,i.Z)({},n),{},{statuses:Array.from(Ue.cv),createdBefore:d,updatedAfter:c}),tickCursor:c,ticksUntil:d}}),h=u.data,f=u.previousData,p=u.loading&&!h,x=h||f||{},m=x.unterminated,g=x.terminated,v=x.workspaceOrError,j=r.useMemo((function(){var e={},n=Date.now();return[].concat((0,Y.Z)("Runs"===(null===m||void 0===m?void 0:m.__typename)?m.results:[]),(0,Y.Z)("Runs"===(null===g||void 0===g?void 0:g.__typename)?g.results:[])).forEach((function(t){if(t.startTime&&t.repositoryOrigin&&Ke({start:o,end:l},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var r=yn({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[r]=[].concat((0,Y.Z)(e[r]||[]),[{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}})),e}),[l,m,g,o]),w=r.useMemo((function(){if(!v||"Workspace"!==v.__typename)return[];var e,n=[],t=(0,N.Z)(v.locationEntries);try{var r=function(){var t,r=e.value;if("WorkspaceLocationEntry"!==r.__typename||"RepositoryLocation"!==(null===(t=r.locationOrLoadError)||void 0===t?void 0:t.__typename))return"continue";var i,a=Date.now(),c=(0,N.Z)(r.locationOrLoadError.repositories);try{for(c.s();!(i=c.n()).done;){var d,u=i.value,h=(0,M.kQ)(u.name,r.locationOrLoadError.name),f=(0,N.Z)(u.pipelines);try{var p=function(){var e,t=d.value,r=(u.schedules||[]).filter((function(e){return e.pipelineName===t.name})),i=[],c=(0,N.Z)(r);try{var f=function(){var n=e.value;n.scheduleState.status===s.ynu.RUNNING&&n.futureTicks.results.forEach((function(e){var t=e.timestamp,r=1e3*t;r>a&&Ke({start:o,end:l},{start:r,end:r})&&i.push({id:"".concat(n.pipelineName,"-future-run-").concat(t),status:"SCHEDULED",startTime:r,endTime:r+5e3})}))};for(c.s();!(e=c.n()).done;)f()}catch(v){c.e(v)}finally{c.f()}var p=(0,z.pv)(t.name),x=yn(h,t.name),m=p?"Ad hoc materializations":t.name,g=j[x]||[];(i.length||g.length)&&n.push({key:x,jobName:m,jobType:p?"asset":"job",repoAddress:h,path:(0,wn.jT)({repoName:h.name,repoLocation:h.location,pipelineName:t.name,isJob:t.isJob}),runs:[].concat((0,Y.Z)(g),i)})};for(f.s();!(d=f.n()).done;)p()}catch(x){f.e(x)}finally{f.f()}}}catch(x){c.e(x)}finally{c.f()}};for(t.s();!(e=t.n()).done;)r()}catch(c){t.e(c)}finally{t.f()}var a=n.reduce((function(e,n){var t=n.runs.map((function(e){return e.startTime}));return(0,i.Z)((0,i.Z)({},e),{},(0,_e.Z)({},n.key,Math.min.apply(Math,(0,Y.Z)(t))))}),{});return n.sort((function(e,n){return a[e.key]-a[n.key]}))}),[v,j,o,l]);return r.useMemo((function(){return{jobs:w,initialLoading:p,queryData:u}}),[p,w,u])}(K),$=F.jobs,V=F.initialLoading,B=F.queryData,J=(0,m.C4)(B,m.dT),H=r.useMemo((function(){var e=f.toLocaleLowerCase().trim(),n=t.flatMap((function(n){var t=(0,M.kQ)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter((function(n){return n.name.toLocaleLowerCase().includes(e)})).map((function(e){return yn(t,e.name)}))}));return new Set(n)}),[t,f]),q=r.useMemo((function(){return $.filter((function(e){var n=e.key;return H.has(n)}))}),[$,H]);return(0,y.jsxs)(l.T,{children:[(0,y.jsx)(c.m,{title:(0,y.jsx)(d.X6,{children:"Overview"}),tabs:(0,y.jsx)(b,{tab:"timeline",refreshState:J})}),(0,y.jsxs)(u.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,y.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[n.length>1&&(0,y.jsx)(O.C,{}),(0,y.jsx)(L.oi,{icon:"search",value:f,onChange:function(e){return p(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"200px"}})]}),(0,y.jsxs)(u.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,y.jsx)(Te.h,{activeItems:new Set([w]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return k(e)}}),(0,y.jsxs)(u.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,y.jsx)(oe.zx,{onClick:P,children:"\u2190"}),(0,y.jsx)(oe.zx,{onClick:G,children:"Now"}),(0,y.jsx)(oe.zx,{onClick:U,children:"\u2192"})]})]})]}),(0,y.jsx)(Be,{loading:V,range:K,jobs:q})]})},_n=function(){return(0,y.jsxs)(o.rs,{children:[(0,y.jsx)(o.AW,{path:"/overview/timeline",children:(0,y.jsx)(Tn,{})}),(0,y.jsx)(o.AW,{path:"/overview/jobs",children:(0,y.jsx)(ne,{})}),(0,y.jsx)(o.AW,{path:"/overview/schedules",children:(0,y.jsx)(de,{})}),(0,y.jsx)(o.AW,{path:"/overview/sensors",children:(0,y.jsx)(je,{})}),(0,y.jsx)(o.AW,{path:"/overview/backfills",children:(0,y.jsx)(_,{})}),(0,y.jsx)(o.AW,{path:"*",render:function(){return(0,y.jsx)(o.l_,{to:"/overview/timeline"})}})]})},An=_n},79422:function(e,n,t){var r=t(88567);e.exports=function(e,n){return!!(null==e?0:e.length)&&r(e,n,0)>-1}},7849:function(e){e.exports=function(e,n,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(n,e[r]))return!0;return!1}},72983:function(e,n,t){var r=t(6031);e.exports=function(e,n,t){"__proto__"==n&&r?r(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}},20611:function(e){e.exports=function(e,n,t,r){for(var o=e.length,i=t+(r?1:-1);r?i--:++i<o;)if(n(e[i],i,e))return i;return-1}},88567:function(e,n,t){var r=t(20611),o=t(5760),i=t(83328);e.exports=function(e,n,t){return n===n?i(e,n,t):r(e,o,t)}},5760:function(e){e.exports=function(e){return e!==e}},33976:function(e,n,t){var r=t(7124),o=t(79422),i=t(7849),s=t(4294),a=t(19077),l=t(46138);e.exports=function(e,n,t){var c=-1,d=o,u=e.length,h=!0,f=[],p=f;if(t)h=!1,d=i;else if(u>=200){var x=n?null:a(e);if(x)return l(x);h=!1,d=s,p=new r}else p=n?[]:f;e:for(;++c<u;){var m=e[c],g=n?n(m):m;if(m=t||0!==m?m:0,h&&g===g){for(var v=p.length;v--;)if(p[v]===g)continue e;n&&p.push(g),f.push(m)}else d(p,g,t)||(p!==f&&p.push(g),f.push(m))}return f}},19077:function(e,n,t){var r=t(1465),o=t(19715),i=t(46138),s=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=s},83328:function(e){e.exports=function(e,n,t){for(var r=t-1,o=e.length;++r<o;)if(e[r]===n)return r;return-1}},19715:function(e){e.exports=function(){}}}]);
//# sourceMappingURL=201.adb7bab7.chunk.js.map